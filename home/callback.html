<!--file per gestire la redirect di github (scambio del token di accesso)-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub OAuth Callback</title>
    <link rel="shortcut icon" href="./Immagini/favicon.png">
    <link rel="stylesheet" href="home.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://icons8.com/icon/7801/up" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/oauth2-client-js@0.0.15/dist/oauth2-client.js"></script>
    <script>
        // Check if OAuth library is loaded
        if (typeof OAuth !== 'undefined') {
            console.log('OAuth library loaded successfully.');
        } else {
            console.error('OAuth library failed to load.');
        }
    </script>
</head>
<body>
    <script>
        // Initialize the OAuth configuration
        var githubAuth = OAuth2.create({
            client: 'Ov23li8fPAWLW5JGKcl1',
            client_secret: 'e0b792dd27c7fee3b3668176f1d312c9f85fbc7f',
            authorization_url: 'https://github.com/login/oauth/authorize',
            token_url: 'https://github.com/login/oauth/access_token',
            redirect_uri: 'http://localhost/auth/github/callback',
            scope: 'user'
        });

        // Handle the OAuth2 callback
        githubAuth.callback(function(err, token) {
            if (err) {
                console.error('Authorization error:', err);
                return;
            }

            console.log('Authorization successful, access token:', token);
            // Store the access token in sessionStorage or localStorage
            sessionStorage.setItem('github_access_token', token.access_token);

            // Redirect to the home page or another page
            window.location.href = 'home.html';
        });
    </script>
</body>
</html>


