<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="shortcut icon" href="./Immagini/favicon.png">
  <link rel="stylesheet" href="home.css">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://icons8.com/icon/7801/up" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>


  <title>MyShoppingList</title>

    <script>
        window.addEventListener('load', function (event) {
            console.log(sessionStorage.getItem("Log"));
            console.log(sessionStorage.getItem("email"));
            console.log(sessionStorage.getItem("sessionId"));
            console.log(sessionStorage.getItem("logged_github"));
            console.log(sessionStorage.getItem("email_git"));
            if (sessionStorage.getItem("Log") != 1 && sessionStorage.getItem("sessionId")==null) {
                $.ajax({
                    url: "check_login.php",
                    type: "POST",
                    data: {
                        cestino: 1
                    },
                    success: function (data) {
                        console.log('Richiesta andata a buon fine.');
                    },
                    error: function (xhr, status, error) {
                        // Gestisci gli errori durante la chiamata AJAX
                        console.error('Si è verificato un errore durante la richiesta.');
                    }
                })
            }
            
            setSessionCookie();
        });
    </script>

    <!-- Check del Login -->
    <script>
        
        $(document).ready(function(){
            $('.login form').submit(function(event){
                event.preventDefault();
                
                // Ottieni i valori inseriti dall'utente nei campi email e password
                var email = $(this).find('input[type="email"]').val();
                var pass = $(this).find('input[type="password"]').val();
                $.ajax({
                    
                    url: 'check_login.php', 
                    type: 'POST',
                    data: { email: email, pass: pass },
                    success: function(response){
                        var jsonResponse = JSON.parse(response);
                        console.log(response)
                        if(jsonResponse.status === 'success'){
                            // Reindirizza l'utente alla sua pagina utente
                            window.location.href = '../User_Page/user.html';
                            sessionStorage.setItem("Log",1);
                            sessionStorage.setItem("email",email);
                            sessionStorage.setItem("admin", jsonResponse.admin);
                            
                        } else {
                            Swal.fire({
                                title: "Errore!",
                                html: "Invalid credentials. <br>Try again.",
                                icon: "error",
                                dangerMode: true,
                                background: "#f8f9fa",
                                textColor: "#343a40",
                                width: "400px",
                                padding: "3rem",
                                titleFont: "Montserrat_Arabic_Regular",
                                textFont: "Montserrat_Arabic_Regular",
                                showConfirmButton: false, 
                                timer: 2000 
                            });
                        }
                    },
                    error: function(xhr, status, error){
                        console.error('Si è verificato un errore durante la richiesta.');
                    }
                });
                
            });
        });
    </script>

<!-- pulsante preferenze su NavBar-->
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const preferencesLink = document.getElementById('preferences-link');
        const wrapper = document.querySelector('.wrapper');
        const body = document.querySelector('body');
        const iconClose = document.querySelector('.icon-close');
        const btnPopup = document.querySelector('.Btn');

        preferencesLink.addEventListener('click', function (event) {
            event.preventDefault(); // Impedisce il comportamento predefinito del link
            if (sessionStorage.getItem("Log") != 1) {
                wrapper.classList.add('active-popup');
                body.classList.add('popup-active');
            } 
            else if (sessionStorage.getItem("admin") !=1) {
                window.location.href = '../preferences/preferences.html'; //se loggato manda alla pagina di preferenze
            }
            else{ 
                // document.getElementById('popup-overlay').style.display = 'flex';
                
                // function hidePopup() {
                //     document.getElementById('popup-overlay').style.display = 'none';
                // }
                // document.getElementById('popup-close').addEventListener('click', hidePopup);
                Swal.fire({
                    title: "An Admin cannot access preferences!",
                    icon: "warning",
                    dangerMode: true,
                    background: "#f8f9fa",
                    textColor: "#343a40",
                    width: "400px",
                    padding: "3rem",
                    titleFont: "Montserrat_Arabic_Regular",
                    textFont: "Montserrat_Arabic_Regular",
                    showConfirmButton: false, 
                    timer: 2000 
                });
            }
        });
    });
</script>


    <!-- Popup Login -->
    <script>
        window.addEventListener('load', function (event) {
        /*mantenere il numero di telefono modificato*/
        var savedPhoneNumber = localStorage.getItem('phoneNumber');
        if (savedPhoneNumber) {
            document.getElementById('tel').innerHTML = '<img src="./Immagini/phone.png">' + savedPhoneNumber;
        }
        var savedEmailAddress = localStorage.getItem('emailAddress');
        if (savedEmailAddress) {
            document.getElementById('email').innerHTML = '<img src="./Immagini/mail.png">' + savedEmailAddress;
        }
        var savedFacebook = localStorage.getItem('facebookLink');
        if(savedFacebook){
            document.querySelector('.icon.facebook').setAttribute('href', savedFacebook);
        }
        var savedInstagram = localStorage.getItem('instagramLink');
        if(savedInstagram){
            document.querySelector('.icon.instagram').setAttribute('href', savedInstagram);
        }
        var savedGithub = localStorage.getItem('githubLink');
        if(savedGithub){
            document.querySelector('.icon.github').setAttribute('href', savedGithub);
        }
        var savedLinkedin = localStorage.getItem('linkedinLink');
        if(savedLinkedin){
            document.querySelector('.icon.linkedin').setAttribute('href', savedLinkedin);
        }
        var savedYoutube = localStorage.getItem('youtubeLink');
        if(savedYoutube){
            document.querySelector('.icon.youtube').setAttribute('href', savedYoutube);
        }

        if (sessionStorage.getItem("Log") == 1) {
            //se admin non c' è il pulsante fill the cart
            if(sessionStorage.getItem("admin") == 1){
                var buttonShopping = document.querySelector('.button_shopping');
                var adminButtons = document.querySelector('.admin-buttons');
                var contactsButton = document.querySelectorAll('.modifica_contatti');
                var socialModButtons = document.querySelectorAll('.modifica_social');
                if (buttonShopping) {
                    buttonShopping.style.display = 'none';
                }
                if (adminButtons) {
                    adminButtons.style.display = 'block';  // Mostra i pulsanti A, B e C
                }
                if(contactsButton.length > 0){
                    contactsButton.forEach(function(button) {
                        button.style.display = 'block';  // Mostra tutti i pulsanti Modifica
                        button.addEventListener('click', function() {
                                if (button.id === 'modTel') {
                                    openModalTel();
                                }
                                if(button.id==='modMail'){
                                    openModalEmail();
                                }
                            });
                });
                }
                if(socialModButtons.length > 0){
                    socialModButtons.forEach(function(button) {
                        button.style.display = 'block';
                        button.addEventListener('click', function() {
                            if (button.id === 'facebook') {
                                openModalFacebook();
                            }
                            if (button.id === 'instagram') {
                                openModalInstagram();
                            }
                            if (button.id === 'github') {
                                openModalGithub();
                            }
                            if (button.id === 'linkedin') {
                                openModalLinkedin();
                            }
                            if (button.id === 'youtube') {
                                openModalYoutube();
                            }
                        });
                        
                });
            }
            }
            
            // Se l'utente è già loggato, reindirizza alla pagina utente
            document.querySelector('.Btn').addEventListener('click', function () {
                window.location.href = '../User_Page/user.html';
                wrapper.classList.remove('active-popup');
                body.classList.remove('popup-active');
            });
            } else {
                // Se l'utente non è loggato, mostra il popup di login
                const wrapper = document.querySelector('.wrapper');
                const body = document.querySelector('body');
                const loginLink = document.querySelector('.login-link');
                const iconClose = document.querySelector('.icon-close');
                const btnPopup = document.querySelector('.Btn');

                loginLink.addEventListener('click', () => {
                    wrapper.classList.remove('active');
                });

                btnPopup.addEventListener('click', () => {
                    wrapper.classList.add('active-popup');
                    body.classList.add('popup-active');
                });

                iconClose.addEventListener('click', () => {
                    wrapper.classList.remove('active-popup');
                    body.classList.remove('popup-active');
                    hidePopup();
                });
            }
           
        });
    </script>

    <!-- Cambia immagine Navbar -->
    <script>
        window.addEventListener('load', function (event) {
            if(sessionStorage.getItem("Log")==1){
                var email=sessionStorage.getItem("email");
                $.ajax({
                    url: "check_login.php",
                    type: "GET",
                    data:{
                        email: email
                    },
                    dataType:'json',
                    success: function(data){
                        data.forEach(function (element) {

                            var name_img = element.nome;

                            function primaLetteraMaiuscola(parola) {
                                var primaLettera = parola.charAt(0);
                                return primaLettera.toUpperCase();
                            }

                            name_img = primaLetteraMaiuscola(name_img);

                            
                            const iconElement = document.querySelector('.Btn ion-icon');
                            iconElement.remove();
                            const imgElement = document.createElement('h3');

                            imgElement.textContent = name_img;

                            imgElement.style.color = 'white';
                            imgElement.style.margin = 'auto'
                            imgElement.style.fontWeight = '700';

                            const signDiv = document.querySelector('.Btn .sign');
                            signDiv.appendChild(imgElement);

                            const loginButton = document.querySelector('.text_btn');

                            loginButton.textContent = 'Profile';

                        });
                    },
                    error: function(xhr, status, error){
                        console.error('Si è verificato un errore durante la richiesta.');
                    }
                })
            }
            
            document.getElementById('login-btn').addEventListener('click', function(){
                $.ajax({
                    url: "check_login.php?action=log_no_git",
                    type: "POST",
                    success: function(data){
                        console.log('Richiesta andata a buon fine.');
                    },
                    element: function(xhr, status, error){
                        console.error('Si è verificato un errore durante la richiesta.');
                    }
                })
            })
            
        });
    </script>

    <!-- Script per la generazione di un session ID casuale -->
    <script>
        function generateSessionId() {
            var characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';

            var length = 10;

            var sessionId = '';
            for (var i = 0; i < length; i++) {
                var randomIndex = Math.floor(Math.random() * characters.length);
                
                sessionId += characters.charAt(randomIndex);
            }
            
            return sessionId;
        }


        function setSessionCookie() {
            if (sessionStorage.getItem('sessionId')) {
                var sessionId = sessionStorage.getItem('sessionId');
                console.log('Session ID is already set: ' + sessionId);
                return;
            }

            var sessionId = generateSessionId();

            sessionStorage.setItem('sessionId', sessionId); 
        }

        
    </script>

<!--recensioni gestione-->
    <script>
    $(document).ready(function() {
        // Caricamento delle recensioni
        $.ajax({
            url: 'recensioni.php',
            type: 'GET',
            dataType: 'json',
            success: function(reviews) {
                reviews.forEach(function(review) {
                    $('#recensioni-list').append(`<p>${review.text}</p>`);
                });
            },
            error: function(error) {
                console.error('Errore durante il caricamento delle recensioni:', error);
            }
        });

        // Aggiunta di una nuova recensione
        $('#form-recensione').submit(function(event) {
            //per il login-popup
            event.preventDefault();
            const preferencesLink = document.getElementById('preferences-link');
            const wrapper = document.querySelector('.wrapper');
            const body = document.querySelector('body');
            const loginLink = document.querySelector('.login-link');
            const iconClose = document.querySelector('.icon-close');
            const btnPopup = document.querySelector('.Btn');
            //per la recensione
            var reviewText = $('#testo-recensione').val();

            if(sessionStorage.getItem("Log") != 1){
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth' // Scorrimento fluido
                });
                wrapper.classList.add('active-popup');
                body.classList.add('popup-active');
            }
            else if (sessionStorage.getItem("admin")==1){
                // document.getElementById('popup-recensione-admin').style.display = 'flex';
                
                // function hidePopup() {
                //     document.getElementById('popup-recensione-admin').style.display = 'none';
                // }
                // document.getElementById('popup-recensione-admin-close').addEventListener('click', hidePopup);
                Swal.fire({
                    title: "An Admin cannot write reviews!",
                    icon: "warning",
                    dangerMode: true,
                    background: "#f8f9fa",
                    textColor: "#343a40",
                    width: "400px",
                    padding: "3rem",
                    titleFont: "Montserrat_Arabic_Regular",
                    textFont: "Montserrat_Arabic_Regular",
                    showConfirmButton: false, 
                    timer: 2000 
                });
            }
            else{
                var email = sessionStorage.getItem("email");
                $.ajax({
                    url: 'recensioni.php',
                    type: 'POST',
                    data: { text: reviewText, email: email, add: true },
                    success: function(response) {
                        //alert(response);
                        location.reload(); // Ricarica la pagina per mostrare la nuova recensione
                    },
                    error: function(error) {
                        console.error('Errore durante l\'aggiunta della recensione:', error);
                    }
                });
            }
        });        

        //elimina una recensione
        document.getElementById('elimina').addEventListener('click', function(event) {
            var admin = sessionStorage.getItem("admin");
            //per il pop-up login
            event.preventDefault();
            const preferencesLink = document.getElementById('preferences-link');
            const wrapper = document.querySelector('.wrapper');
            const body = document.querySelector('body');
            const loginLink = document.querySelector('.login-link');
            const iconClose = document.querySelector('.icon-close');
            const btnPopup = document.querySelector('.Btn');
            if(sessionStorage.getItem("Log") != 1){
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth' // Scorrimento fluido
                });
                wrapper.classList.add('active-popup');
                body.classList.add('popup-active');
            }
            else if(admin!=1){
                var email = sessionStorage.getItem("email");
                $.ajax({
                url: 'recensioni.php',
                type: 'DELETE',
                data: {email: email, admin: admin },

            success: function(response){
                //alert(result);
                location.reload(); // Ricarica le recensioni dopo l'eliminazione
            },
            error: function(error){
                console.error('Errore nell\'eliminazione della recensione:', error);
            }
            });
            }
            else{
                //var email = prompt('Inserisci l\'email per cancellare la recensione:');
                document.getElementById('emailModal').style.display = 'block';
                document.getElementById("overlay").style.display = "block";
                document.body.classList.add("no-scroll");
                document.getElementsByClassName("close_modal")[0].addEventListener('click', function() {
                    document.getElementById('emailModal').style.display = 'none';
                    document.getElementById("overlay").style.display = "none";
                    document.body.classList.remove("no-scroll");
                });

                document.getElementById('submitEmail').onclick = function() {
                    var email = document.getElementById('emailInput').value;

                    if (!email) {
                        alert("Please enter all fields!");
                        return;
                    }
                    
                    $.ajax({
                    url: 'recensioni.php',
                    type: 'DELETE',
                    data: {email: email, admin: admin },

                    success: function(response){
                        //alert(result);
                        location.reload(); // Ricarica le recensioni dopo l'eliminazione
                        document.getElementById('emailModal').style.display = 'none';
                        document.getElementById("overlay").style.display = "none";
                        document.body.classList.remove("no-scroll");
                    },
                    error: function(error){
                        console.error('Errore nell\'eliminazione della recensione:', error);
                    }
                    });
                };
                
            }
        });

        //modifica-recensione
        document.getElementById('modifica').addEventListener('click', function(event) {
            var admin = sessionStorage.getItem("admin");
            //per il pop-up login
            event.preventDefault();
            const preferencesLink = document.getElementById('preferences-link');
            const wrapper = document.querySelector('.wrapper');
            const body = document.querySelector('body');
            const loginLink = document.querySelector('.login-link');
            const iconClose = document.querySelector('.icon-close');
            const btnPopup = document.querySelector('.Btn');
            if(sessionStorage.getItem("Log") != 1){
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth' // Scorrimento fluido
                });
                wrapper.classList.add('active-popup');
                body.classList.add('popup-active');
            }
            else if(admin==1){
                // document.getElementById('popup-modifica-recensione-admin').style.display = 'flex';
                
                // function hidePopup() {
                //     document.getElementById('popup-modifica-recensione-admin').style.display = 'none';
                // }
                // document.getElementById('popup-modifica-recensione-admin-close').addEventListener('click', hidePopup);
                Swal.fire({
                    title: "An Admin cannot edit reviews!",
                    icon: "warning",
                    dangerMode: true,
                    background: "#f8f9fa",
                    textColor: "#343a40",
                    width: "400px",
                    padding: "3rem",
                    titleFont: "Montserrat_Arabic_Regular",
                    textFont: "Montserrat_Arabic_Regular",
                    showConfirmButton: false, 
                    timer: 2000 
                });
            }
            else{
                document.getElementById('modificaModal').style.display = 'block';
                document.getElementById("overlay").style.display = "block";
                document.body.classList.add("no-scroll");
                document.querySelector('.close2').addEventListener('click', function() {
                    document.getElementById('modificaModal').style.display = 'none';
                    document.getElementById("overlay").style.display = "none";
                    document.body.classList.remove("no-scroll");
                });

                document.getElementById('submittext').onclick = function() {
                    var email=sessionStorage.getItem("email");
                    var text = document.getElementById('textInput').value;
                    
                    if(!text){
                        alert("Please enter all fields!");
                        return;
                    }

                    $.ajax({
                    url: 'recensioni.php',
                    type: 'POST',
                    data: {email: email, admin: admin, text: text, mod: true},

                    success: function(response){
                        //alert(result);
                        location.reload(); // Ricarica le recensioni dopo la modifica
                        document.getElementById('modificaModal').style.display = 'none';
                        document.getElementById("overlay").style.display = "none";
                        document.body.classList.remove("no-scroll");
                    },
                    error: function(error){
                        console.error('Errore nella modifica della recensione:', error);
                    }
                    });
                }
            }
        });
    }); 

        window.onclick = function(event) {
            if (event.target == document.getElementById("modificaModal")) {
                document.getElementById("modificaModal").style.display = "none";
                document.getElementById("overlay").style.display = "none";
                document.body.classList.remove("no-scroll");
            }
            if (event.target == document.getElementById("emailModal")) {
                document.getElementById("emailModal").style.display = "none";
                document.getElementById("overlay").style.display = "none";
                document.body.classList.remove("no-scroll");
            }
        }

        

    </script>


</head>

<body>

    <div class="overlay" id="overlay"></div>


    <!-- NavBar -->
    <div>
        <header class="header">
            <a href="home.html"><img src="./Immagini/MyShoppingList.png" class="logo"></a>
            <nav class="my_navbar">
                    <a href="home.html" class="link_navbar">Home</a>
                    <a href="#" id="preferences-link" class="link_navbar">Preferences</a>
                    <a href="#contatti">Contacts</a>
                    <a href="#contatti" class="icon_contatti"><img src="./Immagini/phone.png"></a>
                    <a href="#">        
                        <button class="Btn">
                        <div class="sign"><ion-icon name="person-circle-outline" size="large"></ion-icon></div>
                        <div class="text_btn">Login</div>
                        </button>
                    </a>
            </nav>
        </header>
    </div>

    <!--Login e Signin-->
    <div class="wrapper">
        <span class="icon-close">
            <ion-icon name="close-outline"></ion-icon>
        </span>

        <div class="form-box login">
            <h2>Login</h2>
            <form action="#" method="post">
                <div class="input-box">
                    <span class="icon"><ion-icon name="mail-outline"></ion-icon></span>
                    <input name="campo1" type="email" required>
                    <label>Email</label>
                </div>
                <div class="input-box">
                    <span class="icon"><ion-icon name="lock-closed-outline"></ion-icon></span>
                    <input name="campo2"  type="password" required pattern="^(?!.*->GITHUB).*$">
                    <label>Password</label>
                </div>
                <button name="accesso" type="submit" class="btn" id="login-btn">Login</button>
                
                <div class="login-register">
                    <p>Don't have an account?<a href="../User_Page/user.html" class="register-link"> Register</a></p>
                </div>
                <!--aggiunta bottone per login con github-->
                <!-- <a href="loginOAuth.php?action=github" id="github-login">Login with GitHub</a> -->
                <a href="loginOAuth.php?action=github" id="github-login" 
                style="display:flex;align-items:center;justify-content:center;background-color:#4a5568;padding:10px 20px;border-radius:8px;color:white;text-decoration:none;transition: background-color 0.3s ease;" 
                onmouseover="this.style.backgroundColor='#374151'" 
                onmouseout="this.style.backgroundColor='#4a5568'">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" style="margin-right:10px;" viewBox="0 0 1792 1792">
                    <path d="M896 128q209 0 385.5 103t279.5 279.5 103 385.5q0 251-146.5 451.5t-378.5 277.5q-27 5-40-7t-13-30q0-3 .5-76.5t.5-134.5q0-97-52-142 57-6 102.5-18t94-39 81-66.5 53-105 20.5-150.5q0-119-79-206 37-91-8-204-28-9-81 11t-92 44l-38 24q-93-26-192-26t-192 26q-16-11-42.5-27t-83.5-38.5-85-13.5q-45 113-8 204-79 87-79 206 0 85 20.5 150t52.5 105 80.5 67 94 39 102.5 18q-39 36-49 103-21 10-45 15t-57 5-65.5-21.5-55.5-62.5q-19-32-48.5-52t-49.5-24l-20-3q-21 0-29 4.5t-5 11.5 9 14 13 12l7 5q22 10 43.5 38t31.5 51l10 23q13 38 44 61.5t67 30 69.5 7 55.5-3.5l23-4q0 38 .5 88.5t.5 54.5q0 18-13 30t-40 7q-232-77-378.5-277.5t-146.5-451.5q0-209 103-385.5t279.5-279.5 385.5-103zm-477 1103q3-7-7-12-10-3-13 2-3 7 7 12 9 6 13-2zm31 34q7-5-2-16-10-9-16-3-7 5 2 16 10 10 16 3zm30 45q9-7 0-19-8-13-17-6-9 5 0 18t17 7zm42 42q8-8-4-19-12-12-20-3-9 8 4 19 12 12 20 3zm57 25q3-11-13-16-15-4-19 7t13 15q15 6 19-6zm63 5q0-13-17-11-16 0-16 11 0 13 17 11 16 0 16-11zm58-10q-2-11-18-9-16 3-14 15t18 8 14-14z"></path>
                </svg>
                    Login with GitHub
                </a>
            
            </form>
            
        </div>

        <div class="form-box register">
            <h2>Registration</h2>
            <form action="#">
                <div class="input-box">
                    <span class="icon"><ion-icon name="person-outline"></ion-icon></span>
                    <input type="text" required>
                    <label>Username</label>
                </div>
                <div class="input-box">
                    <span class="icon"><ion-icon name="mail-outline"></ion-icon></span>
                    <input type="email" required>
                    <label>Email</label>  
                </div>
                <div class="input-box">
                    <span class="icon"><ion-icon name="lock-closed-outline"></ion-icon></span>
                    <input type="password" required pattern="^(?!.*->GITHUB).*$">
                    <label>Password</label>
                </div>
                <div class="remember-forgot">
                    <label><input type="checkbox">agree to the terms & conditions</label>
                </div>
                <button type="submit" class="btn">Register</button>
                <div class="login-register">
                    <p>Already have an account?<a href="#" class="login-link">Login</a></p>
                </div>
            </form>
        </div>
    </div>

    <div class="container_slogan">
        <!-- Container Slogan, Background e Pulsante Shopping -->
        <img class="showing background" src="./Immagini/food9.png">
        <img class="background" src="./Immagini/food3.jpg">
        <img class="background" src="./Immagini/food5.jpg">
        <img class="background" src="./Immagini/food7.png">
        <img class="background" src="./Immagini/food8.png">
        <img class="background" src="./Immagini/food6.png">
        <img class="background" src="./Immagini/food10.png">
        <img class="background" src="./Immagini/food11.png">
        <img class="background" src="./Immagini/food12.png">
        
        <div class="text_slogan_container">
            <div class="text_slogan lineUp">The easier way <br> to save money <br> and eat healthy.</div>
            <div><br></div>
            <div class="shopping_container">
                <button id="TEST" class="button_shopping lineUp" onclick="window.location.href='../search_products/search_products.html';" >Fill the cart now ➜</button>
            </div>
        </div>

    </div>

    <!-- bottoni per l'admin di gestione-->
    <div class="admin-buttons" style="display: none;">
        <button class="button_admin" onclick="window.location.href='../Management_Products/management_products.html';">Products</button>
        <button class="button_admin" onclick="window.location.href='../Management_Users/management_users.html';">Users</button>
        <button class="button_admin" onclick="window.location.href='../Management_Supermarkets/management_supermarkets.html';">Supermarkets</button>
    </div>

    <!-- Obiettivi -->
    <div class="obiettivi_container">
        <div> 
            <div class="obiettivi obiettivi1"></div>
            <div class="text_obiettivi_sansserif">Convenience</div>
            <div class="text_obiettivi_serif"> We always find <br> the lowest price</div>
        </div>

        <div>
            <div class="obiettivi obiettivi2"></div>
            <div class="text_obiettivi_sansserif"> Health </div>
            <div class="text_obiettivi_serif">We choose the best <br>products</div>
        </div>

        <div>
            <div class="obiettivi obiettivi3"></div>
            <div class="text_obiettivi_sansserif"> Position </div>
            <div class="text_obiettivi_serif">A stone's throw <br> from home</div>
        </div>
    </div>

    <!-- Spiegazioni -->
    <div class="spiegazioni">
        <section class="spiegazioni_container">
            <div class="image-container_sopra">
                <img src="./Immagini/gif2.gif" alt="Immagine">
            </div>
        
            <div class="text-container">
                <h1>How do we help you?</h1>
                <br>
                <p class="text_spiegazioni_serif">Our goal is to simplify the lives of all the people who don't know which supermarket to go to to find the best prices and quality they want.</p>
                <p class="text_spiegazioni_serif">Simply search for all the products you want, add them to the cart, and as soon as it is completed we will immediately be able to indicate which supermarket to go to based on the cheapest price and location.</p>
            </div>
        </section>

        <section class="spiegazioni_container">
            <div class="text-container">
                <h1>Tailored for you!</h1>
                <br>
                <p class="text_spiegazioni_serif">Furthermore, by filling out a form that we administer to all users who want to register, we will also be able to indicate which product is best for the user, based on the preferences indicated and the lifestyle they have chosen.</p>
                </div>

            <div class="image-container_sotto">
                <img src="./Immagini/gif (1).gif" alt="Immagine">
            </div>
        </section>
    </div>

    <!-- SuperMercati e Marche-->
    <div class="text_supermercati">
        <p>From the best supermarkets...</p>
    </div>

    <div class="griglia">
        <div class="colonna">
            <img src="./Immagini/Carrefour.svg">
        </div>
        <div class="colonna">
            <img src="./Immagini/Coop.svg">
        </div>
        <div class="colonna">
            <img src="./Immagini/Esselunga.svg">
        </div>
        <div class="colonna">
            <img src="./Immagini/Conad.svg">
        </div>
        <div class="colonna">
            <img src="./Immagini/Todis.svg">
        </div>
    </div>

    <div class="text_prodotti">
        <p>...to the best products</p>
    </div>

    <div class="logos">
        <div class="logos_slide">
            <img src="./Immagini/Nutella.svg">
            <img src="./Immagini/Barilla.svg">
            <img src="./Immagini/rio_mare.png">
            <img src="./Immagini/Kinder.svg">
            <img src="./Immagini/mulino_bianco.png">
            <img src="./Immagini/Heineken.svg">
            <img src="./Immagini/Grana_Padano.svg">
            <img src="./Immagini/san-carlo-seeklogo.svg">
            <img src="./Immagini/Coca_Cola.svg">
            <img src="./Immagini/Lays.png">
            <img src="./Immagini/Nestlé.svg">
        </div>
            <div class="logos_slide">
            <img src="./Immagini/Nutella.svg">
            <img src="./Immagini/Barilla.svg">
            <img src="./Immagini/rio_mare.png">
            <img src="./Immagini/Kinder.svg">
            <img src="./Immagini/mulino_bianco.png">
            <img src="./Immagini/Heineken.svg">
            <img src="./Immagini/Grana_Padano.svg">
            <img src="./Immagini/san-carlo-seeklogo.svg">
            <img src="./Immagini/Coca_Cola.svg">
            <img src="./Immagini/Lays.png">
            <img src="./Immagini/Nestlé.svg">
        </div>
    </div>

    <!--Pop up Preferenze Admin-->
    
    <div class="popup-overlay" id="popup-overlay">
        <div class="popup-content">
            <span class="popup-close" id="popup-close">&times;</span>
            <p>Un ADMIN non può accedere a Preferenze</p>
        </div>
    </div>

    <!--Pop up Inserisci recensione Admin-->
    <div class="popup-overlay" id="popup-recensione-admin">
        <div class="popup-content">
            <span class="popup-close" id="popup-recensione-admin-close">&times;</span>
            <p>Un ADMIN non può scrivere recensioni</p>
        </div>
    </div>

    <!--Pop up Modifica recensione Admin-->
    <div class="popup-overlay" id="popup-modifica-recensione-admin">
        <div class="popup-content">
            <span class="popup-close" id="popup-modifica-recensione-admin-close">&times;</span>
            <p>Un ADMIN non può modificare recensioni</p>
        </div>
    </div>

    <!--Pop up Elima Recensione Admin-->
    <div id="emailModal" class="modal">
        <div class="modal-content">
            <h2>Enter the email of the review to be deleted. <span class="close_modal">&times;</span></h2>
            <br>
            <input type="email" id="emailInput" placeholder="Email">
            <button id="submitEmail">Confirm</button>
        
        </div>
    </div>
    

    <!--Pop up Modifica Recensione-->
    <div id="modificaModal" class="modal2">
        <div class="modal-content2">
            <span class="close2">&times;</span>
            <h2>Enter your new review.</h2>
            <input type="text" id="textInput" placeholder="text" required>
            <button id="submittext">Confirm</button>
        </div>
    </div>

    <!-- Back To Top -->
    <a href="#" id="back-to-top-btn" class="back_to_top">
        <span>
        <img src="./Immagini/arrow_up.png">
        </span>
    </a>


    <!--Recensioni-->
    <div class="recensioni-container" id="recensioni">
        <form id="form-recensione">
            <h3>Leave a review</h3>
            <textarea id="testo-recensione" placeholder="Write your review here..." required></textarea>
            <button type="submit">Send</button>
            <button id="elimina" type="button">Delete</button>
            <button id="modifica" type="button">Edit</button>
        </form>
        <br>
        <h2>Reviews:</h2>
        <div id="recensioni-list">
            <!-- Qui verranno caricate le recensioni dal database -->
        </div>
        
    </div>
    


    <!-- Footer -->
    <div class="footer_container">
        <div class="social_container">
            <div class="wrapper_social">
                <div class="social_item">
                    <button class="modifica_social" id="facebook"><img src="./Immagini/8666681_edit_icon.svg"></button>
                    <a href="https://www.facebook.com/" class="icon facebook">
                        <span><i class="fab fa-facebook-f"></i></span>
                    </a>
                    
                </div>

                <div class="social_item">
                    <button class="modifica_social" id="instagram"><img src="./Immagini/8666681_edit_icon.svg"></button>
                    <a href="https://www.instagram.com/" class="icon instagram">
                        <span><i class="fab fa-instagram"></i></span>
                    </a>
                </div>

                <div class="social_item">
                    <button class="modifica_social" id="github"><img src="./Immagini/8666681_edit_icon.svg"></button>
                    <a href="https://github.com/damspada/MyShoppingList" class="icon github">
                        <span><i class="fab fa-github"></i></span>
                    </a>
                </div>

                <div class="social_item">
                    <button class="modifica_social" id="linkedin"><img src="./Immagini/8666681_edit_icon.svg"></button>
                    <a href="https://it.linkedin.com/" class="icon linkedin">
                        <span><i class="fab fa-linkedin"></i></span>
                    </a>
                </div>

                <div class="social_item">
                    <button class="modifica_social" id="youtube"><img src="./Immagini/8666681_edit_icon.svg"></button>
                    <a href="https://www.youtube.com/" class="icon youtube">
                        <span><i class="fab fa-youtube"></i></span>
                    </a>
                </div>

                
            </div>
        </div>

        <div id="modalFacebook" class="modalC">
            <div class="modalcontatti-content">
                <h2>Enter new Facebook URL<span class="close" id="closeModalCF">&times;</span></h2>
                <br>
                <input type="text" id="new-facebook" placeholder="URL" style="margin-left: 16%; height: 40px; width: 60%;">
                <button id="save-facebook" class="done_button"><img src="./Immagini/icons8-done-64.png" class="done"></button>
            </div>
        </div>

        <div id="modalInstagram" class="modalC">
            <div class="modalcontatti-content">
                <h2>Enter new Instagram URL<span class="close" id="closeModalCI">&times;</span></h2>
                <br>
                <input type="text" id="new-insta" placeholder="URL" style="margin-left: 16%; height: 40px; width: 60%;">
                <button id="save-insta" class="done_button"><img src="./Immagini/icons8-done-64.png" class="done"></button>
            </div>
        </div>

        <div id="modalGit" class="modalC">
            <div class="modalcontatti-content">
                <h2>Enter new GitHub URL<span class="close" id="closeModalCG">&times;</span></h2>
                <br>
                <input type="text" id="new-git" placeholder="URL" style="margin-left: 16%; height: 40px; width: 60%;">
                <button id="save-git" class="done_button"><img src="./Immagini/icons8-done-64.png" class="done"></button>
            </div>
        </div>

        <div id="modalLinkedin" class="modalC">
            <div class="modalcontatti-content">
                <h2>Enter new Linkedin URL<span class="close" id="closeModalCL">&times;</span></h2>
                <br>
                <input type="text" id="new-linkedin" placeholder="URL" style="margin-left: 16%; height: 40px; width: 60%;">
                <button id="save-linkedin" class="done_button"><img src="./Immagini/icons8-done-64.png" class="done"></button>
            </div>
        </div>

        <div id="modalYoutube" class="modalC">
            <div class="modalcontatti-content">
                <h2>Enter new YouTube URL<span class="close" id="closeModalCY">&times;</span></h2>
                <br>
                <input type="text" id="new-yt" placeholder="URL" style="margin-left: 16%; height: 40px; width: 60%;">
                <button id="save-yt" class="done_button"><img src="./Immagini/icons8-done-64.png" class="done"></button>
            </div>
        </div>

        <div id="modalTel" class="modalC">
            <div class="modalcontatti-content">
                <h2>Change Phone Number<span class="close" id="closeModalCT">&times;</span></h2>
                <br>
                <input type="text" id="new-phone-number" placeholder="Enter new phone number" style="margin-left: 16%; height: 40px; width: 60%;">
                <button id="save-phone-number" class="done_button"><img src="./Immagini/icons8-done-64.png" class="done"></button>
            </div>
        </div>

        <div id="modalMail" class="modalC">
            <div class="modalcontatti-content">
                <h2>Change Email Address<span class="close" id="closeModalCE">&times;</span></h2>
                <br>
                <input type="text" id="new-email" placeholder="Enter new email" style="margin-left: 16%; height: 40px; width: 60%;">
                <button id="save-email" class="done_button"><img src="./Immagini/icons8-done-64.png" class="done"></button>
            </div>
        </div>
        

        <div class="contatti" id="contatti">
            <div class="contatto">
                <p id="tel"><img src="./Immagini/phone.png">+39 340-559-5344</p>
                <button class="modifica_contatti" id="modTel" style="display: none;"><img src="./Immagini/8666681_edit_icon.svg"></button>
            </div>
            
            <div class="contatto">
                <p id="email"><img src="./Immagini/mail.png"><a href="mailto:MyShoppingList@gmail.com">MyShoppingList@gmail.com</a></p>
                <button class="modifica_contatti" id="modMail" style="display: none;"><img src="./Immagini/8666681_edit_icon.svg"></button>
            </div>
        </div>






        <!--funzioni per modificare contatti e social-->
        <script>
            function closeAllModals() {
                var modals = document.querySelectorAll('.modalC');
                modals.forEach(function(modal) {
                    modal.style.display = 'none';
                });
            }

            function openModalTel() {
                closeAllModals();
                var modal = document.getElementById('modalTel');
                modal.style.display = 'block';

                window.scrollTo({
                    top: document.body.scrollHeight,
                    behavior: 'smooth' 
                });

                var closeBtn = document.querySelector('#closeModalCT');
                closeBtn.onclick = function() {
                    modal.style.display = 'none';
                }

                var saveBtn = document.getElementById('save-phone-number');
                saveBtn.onclick = function() {
                    var newPhoneNumber = document.getElementById('new-phone-number').value;
                    if (newPhoneNumber) {
                        document.getElementById('tel').innerHTML = '<img src="./Immagini/phone.png">' + newPhoneNumber;
                        localStorage.setItem('phoneNumber', newPhoneNumber);
                        modal.style.display = 'none';
                        Swal.fire({
                            title: "Success!",
                            text: "Modifications successfully completed.",
                            icon: "success",
                            timer: 1500, 
                            showConfirmButton: false,
                            confirmButtonText: "OK",
                            background: "#f8f9fa",
                            confirmButtonColor: "#28a745",
                            textColor: "#343a40",
                            width: "400px",
                            padding: "3rem",
                            titleFont: "Montserrat_Arabic_Regular",
                            textFont: "Montserrat_Arabic_Regular"
                        });

                    }
                }

                window.onclick = function(event) {
                    if (event.target == modal) {
                        modal.style.display = 'none';
                    }
                }
            }

            function openModalEmail() {
                closeAllModals();
                var modal = document.getElementById('modalMail');
                modal.style.display = 'block';

                window.scrollTo({
                        top: document.body.scrollHeight,
                        behavior: 'smooth' 
                    });

                var closeBtn = document.querySelector('#closeModalCE');
                closeBtn.onclick = function() {
                    modal.style.display = 'none';
                }

                var saveBtn = document.getElementById('save-email');
                saveBtn.onclick = function() {
                    var newEmailAddress = document.getElementById('new-email').value;
                    if (newEmailAddress) {
                        document.getElementById('email').innerHTML = '<img src="./Immagini/mail.png">' + newEmailAddress;
                        localStorage.setItem('emailAddress', newEmailAddress);
                        modal.style.display = 'none';
                        Swal.fire({
                            title: "Success!",
                            text: "Modifications successfully completed.",
                            icon: "success",
                            timer: 1500, 
                            showConfirmButton: false,
                            confirmButtonText: "OK",
                            background: "#f8f9fa",
                            confirmButtonColor: "#28a745",
                            textColor: "#343a40",
                            width: "400px",
                            padding: "3rem",
                            titleFont: "Montserrat_Arabic_Regular",
                            textFont: "Montserrat_Arabic_Regular"
                        });
                    }
                }

                window.onclick = function(event) {
                    if (event.target == modal) {
                        modal.style.display = 'none';
                    }
                }
            }

            function openModalFacebook(){
                closeAllModals();
                var modal = document.getElementById('modalFacebook');
                modal.style.display = 'block';

                window.scrollTo({
                    top: document.body.scrollHeight,
                    behavior: 'smooth' 
                });

                var closeBtn = document.querySelector('#closeModalCF');
                closeBtn.onclick = function() {
                    modal.style.display = 'none';
                }

                var saveBtn = document.getElementById('save-facebook');
                saveBtn.onclick = function() {
                    var newFacebookLink = document.getElementById('new-facebook').value;
                    if (newFacebookLink) {
                        document.querySelector('.icon.facebook').setAttribute('href', newFacebookLink);
                        localStorage.setItem('facebookLink', newFacebookLink);
                        modal.style.display = 'none';
                        Swal.fire({
                            title: "Success!",
                            text: "Modifications successfully completed.",
                            icon: "success",
                            timer: 1500, 
                            showConfirmButton: false,
                            confirmButtonText: "OK",
                            background: "#f8f9fa",
                            confirmButtonColor: "#28a745",
                            textColor: "#343a40",
                            width: "400px",
                            padding: "3rem",
                            titleFont: "Montserrat_Arabic_Regular",
                            textFont: "Montserrat_Arabic_Regular"
                        });
                    }
                }

                window.onclick = function(event) {
                    if (event.target == modal) {
                        modal.style.display = 'none';
                    }
                }
            }

            function openModalInstagram(){
                closeAllModals();
                var modal = document.getElementById('modalInstagram');
                modal.style.display = 'block';

                window.scrollTo({
                    top: document.body.scrollHeight,
                    behavior: 'smooth' 
                });

                var closeBtn = document.querySelector('#closeModalCI');
                closeBtn.onclick = function() {
                    modal.style.display = 'none';
                }

                var saveBtn = document.getElementById('save-insta');
                saveBtn.onclick = function() {
                    var newInstagramLink = document.getElementById('new-insta').value;
                    if (newInstagramLink) {
                        document.querySelector('.icon.instagram').setAttribute('href', newInstagramLink);
                        localStorage.setItem('instagramLink', newInstagramLink);
                        modal.style.display = 'none';
                        Swal.fire({
                            title: "Success!",
                            text: "Modifications successfully completed.",
                            icon: "success",
                            timer: 1500, 
                            showConfirmButton: false,
                            confirmButtonText: "OK",
                            background: "#f8f9fa",
                            confirmButtonColor: "#28a745",
                            textColor: "#343a40",
                            width: "400px",
                            padding: "3rem",
                            titleFont: "Montserrat_Arabic_Regular",
                            textFont: "Montserrat_Arabic_Regular"
                        });
                    }
                }

                window.onclick = function(event) {
                    if (event.target == modal) {
                        modal.style.display = 'none';
                    }
                }
            }
        
            function openModalGithub(){
                closeAllModals();
                var modal = document.getElementById('modalGit');
                modal.style.display = 'block';

                window.scrollTo({
                    top: document.body.scrollHeight,
                    behavior: 'smooth' 
                });

                var closeBtn = document.querySelector('#closeModalCG');
                closeBtn.onclick = function() {
                    modal.style.display = 'none';
                }

                var saveBtn = document.getElementById('save-git');
                saveBtn.onclick = function() {
                    var newGithubLink = document.getElementById('new-git').value;
                    if (newGithubLink) {
                        document.querySelector('.icon.github').setAttribute('href', newGithubLink);
                        localStorage.setItem('githubLink', newGithubLink);
                        modal.style.display = 'none';
                        Swal.fire({
                            title: "Success!",
                            text: "Modifications successfully completed.",
                            icon: "success",
                            timer: 1500, 
                            showConfirmButton: false,
                            confirmButtonText: "OK",
                            background: "#f8f9fa",
                            confirmButtonColor: "#28a745",
                            textColor: "#343a40",
                            width: "400px",
                            padding: "3rem",
                            titleFont: "Montserrat_Arabic_Regular",
                            textFont: "Montserrat_Arabic_Regular"
                        });
                    }
                }

                window.onclick = function(event) {
                    if (event.target == modal) {
                        modal.style.display = 'none';
                    }
                }
            }

            function openModalLinkedin(){
                closeAllModals();
                var modal = document.getElementById('modalLinkedin');
                modal.style.display = 'block';

                window.scrollTo({
                    top: document.body.scrollHeight,
                    behavior: 'smooth' 
                });

                var closeBtn = document.querySelector('#closeModalCL');
                closeBtn.onclick = function() {
                    modal.style.display = 'none';
                }

                var saveBtn = document.getElementById('save-linkedin');
                saveBtn.onclick = function() {
                    var newLinkedinLink = document.getElementById('new-linkedin').value;
                    if (newLinkedinLink) {
                        document.querySelector('.icon.linkedin').setAttribute('href', newLinkedinLink);
                        localStorage.setItem('linkedinLink', newLinkedinLink);
                        modal.style.display = 'none';
                        Swal.fire({
                            title: "Success!",
                            text: "Modifications successfully completed.",
                            icon: "success",
                            timer: 1500, 
                            showConfirmButton: false,
                            confirmButtonText: "OK",
                            background: "#f8f9fa",
                            confirmButtonColor: "#28a745",
                            textColor: "#343a40",
                            width: "400px",
                            padding: "3rem",
                            titleFont: "Montserrat_Arabic_Regular",
                            textFont: "Montserrat_Arabic_Regular"
                        });
                    }
                }

                window.onclick = function(event) {
                    if (event.target == modal) {
                        modal.style.display = 'none';
                    }
                }
            }

            function openModalYoutube(){
                closeAllModals();
                var modal = document.getElementById('modalYoutube');
                modal.style.display = 'block';

                window.scrollTo({
                    top: document.body.scrollHeight,
                    behavior: 'smooth' 
                });

                var closeBtn = document.querySelector('#closeModalCY');
                closeBtn.onclick = function() {
                    modal.style.display = 'none';
                }

                var saveBtn = document.getElementById('save-yt');
                saveBtn.onclick = function() {
                    var newYoutubeLink = document.getElementById('new-yt').value;
                    if (newYoutubeLink) {
                        document.querySelector('.icon.youtube').setAttribute('href', newYoutubeLink);
                        localStorage.setItem('youtubeLink', newYoutubeLink);
                        modal.style.display = 'none';
                        Swal.fire({
                            title: "Success!",
                            text: "Modifications successfully completed.",
                            icon: "success",
                            timer: 1500, 
                            showConfirmButton: false,
                            confirmButtonText: "OK",
                            background: "#f8f9fa",
                            confirmButtonColor: "#28a745",
                            textColor: "#343a40",
                            width: "400px",
                            padding: "3rem",
                            titleFont: "Montserrat_Arabic_Regular",
                            textFont: "Montserrat_Arabic_Regular"
                        });
                    }
                }

                window.onclick = function(event) {
                    if (event.target == modal) {
                        modal.style.display = 'none';
                    }
                }
            }

        </script>
        
        

    </div>
   
<script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
</body>

<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
<script src="home.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>


</html>