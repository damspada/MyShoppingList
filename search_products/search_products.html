<!DOCTYPE html>
<html lang="en">


<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="shortcut icon" href="Icone/favicon.png">
    <link rel="stylesheet" href="search_products.css">
    <link rel="stylesheet" href="checkut_css.css">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


    <!-- Check del Login -->
    <script>
        $(document).ready(function(){
            // Gestisci il submit del form di login
            $('.login form').submit(function(event){
                // Evita il comportamento predefinito del form (ricaricamento della pagina)
                event.preventDefault();

                // Ottieni i valori inseriti dall'utente nei campi email e password
                var email = $(this).find('input[type="email"]').val();
                var pass = $(this).find('input[type="password"]').val();

                // Esegui una chiamata AJAX per controllare le credenziali nel database
                $.ajax({
                    url: 'check_login.php', // URL del file PHP che esegue la query al database
                    type: 'POST',
                    data: { email: email, pass: pass },
                    success: function(response){
                        // Se la risposta è 'success', l'utente esiste nel database
                        sessionStorage.setItem("Log",1);
                        sessionStorage.setItem("email",email);
                        console.log(sessionStorage.getItem("Log"));
                        console.log(sessionStorage.getItem("email"));
                        if(response.trim() === 'success'){
                            // Reindirizza l'utente alla sua pagina utente
                                window.location.href = '../User_Page/user.html';
                        } else {
                            // Mostra il popup di errore
                            swal({
                                title: "Errore!",
                                text: "Invalid credentials. Try again.",
                                icon: "error",
                                button: "OK",
                                dangerMode: true,
                                background: "#f8f9fa",
                                confirmButtonColor: "#dc3545",
                                textColor: "#343a40",
                                width: "400px",
                                padding: "3rem",
                                titleFont: "Montserrat_Arabic_Regular",
                                textFont: "Montserrat_Arabic_Regular"
                            });
                        }
                    },
                    error: function(xhr, status, error){
                        // Gestisci gli errori durante la chiamata AJAX
                        console.error('Si è verificato un errore durante la richiesta.');
                    }
                });
            });
        });
    </script>

    <!-- Popup Login -->
    <script>
        window.addEventListener('load', function (event) {
        if (sessionStorage.getItem("Log") == 1) {
            // Se l'utente è già loggato, reindirizza alla pagina utente
            document.querySelector('.Btn').addEventListener('click', function () {
                window.location.href = '../User_Page/user.html';
                wrapper.classList.remove('active-popup');
                body.classList.remove('popup-active');
            });
            } else {
                // Se l'utente non è loggato, mostra il popup di login
                const wrapper = document.querySelector('.wrapper');
                const body = document.querySelector('body');
                const loginLink = document.querySelector('.login-link');
                const iconClose = document.querySelector('.icon-close');
                const btnPopup = document.querySelector('.Btn');

                loginLink.addEventListener('click', () => {
                    wrapper.classList.remove('active');
                });

                btnPopup.addEventListener('click', () => {
                    wrapper.classList.add('active-popup');
                    body.classList.add('popup-active');
                });

                iconClose.addEventListener('click', () => {
                    wrapper.classList.remove('active-popup');
                    body.classList.remove('popup-active');
                    hidePopup();
                });
            }
        });
    </script>

    <!-- Cambia immagine Navbar -->
    <script>
        window.addEventListener('load', function (event) {
            if(sessionStorage.getItem("Log")==1){
                var email=sessionStorage.getItem("email");
                $.ajax({
                    url: "check_login.php",
                    type: "GET",
                    data:{
                        email: email
                    },
                    dataType:'json',
                    success: function(data){
                        data.forEach(function (element) {

                            var name_img = element.nome;

                            function primaLetteraMaiuscola(parola) {
                                var primaLettera = parola.charAt(0);
                                return primaLettera.toUpperCase();
                            }

                            name_img = primaLetteraMaiuscola(name_img);

                            // Trova l'elemento ion-icon all'interno del pulsante
                            const iconElement = document.querySelector('.Btn ion-icon');

                            // Rimuovi l'elemento ion-icon
                            iconElement.remove();

                            // Crea un nuovo elemento immagine
                            const imgElement = document.createElement('h3');

                            // Assegna il testo della variabile name_img all'elemento h2
                            imgElement.textContent = name_img;
                            imgElement.style.fontSize = '30px';
                            imgElement.style.color = 'white';
                            imgElement.style.margin = 'auto'
                            imgElement.style.fontWeight = '700';

                            // Aggiungi l'immagine al div con la classe "sign"
                            const signDiv = document.querySelector('.Btn .sign');
                            signDiv.appendChild(imgElement);

                            // Seleziona l'elemento del pulsante
                            const loginButton = document.querySelector('.text_btn');

                            // Cambia il testo del pulsante a "Accedi"
                            loginButton.textContent = 'Profile';

                        });
                    },
                    error: function(xhr, status, error){
                        // Gestisci gli errori durante la chiamata AJAX
                        console.error('Si è verificato un errore durante la richiesta.');
                    }
                })
            }
        });
    </script>


    <script> //script per svuotare il carrello alla chiusura della pagina web
        // // window.addEventListener('beforeunload', function(event) {
        // //     $.ajax({
        // //         url: "server.php",
        // //         method: "POST",
        // //         data: { close : '1' },
        // //         success: function(response) {
        // //             console.log('Richiesta andata a buon fine.');
        // //         },
        // //         error: function(xhr, status, error) {
        // //             console.error('Si è verificato un errore durante la richiesta.');
        // //         }
        // //     });
        // // })

        window.addEventListener('load', function (event) {
            $.ajax({
                url: "server.php",
                method: "GET",
                data: { riavvio: '1' },
                dataType: "json",
                success: function (response) {
                    console.log('Richiesta andata a buon fine.');
                    response.forEach(function (element) {
                        if (!(!!document.getElementById(element.Nome))) {
                            var carrelloCard = $('<div>').addClass('carrello_elemento');
                            carrelloCard[0].id = element.Nome;
                            var carrelloNome = $('<div>').addClass('carrello_nome');
                            carrelloNome.append('<h3>' + element.Nome + '</h3>');
                            carrelloCard.append(carrelloNome);

                            var carrelloQuantità = $('<div>').addClass('carrello_quantità');
                            const quantityForm = document.createElement('form');
                            quantityForm.setAttribute('id', element.Nome);
                            quantityForm.setAttribute('action', '');
                            quantityForm.setAttribute('method', 'post');

                            // Create the hidden input for update_quantity_name
                            const updateQuantityNameInput = document.createElement('input');
                            updateQuantityNameInput.setAttribute('type', 'hidden');
                            updateQuantityNameInput.setAttribute('name', 'update_quantity_name');
                            updateQuantityNameInput.value = element.Nome;

                            // Create the "-" button
                            const decreaseButton = document.createElement('button');
                            decreaseButton.setAttribute('type', 'submit');
                            decreaseButton.setAttribute('class', 'bottoni_tondi2');
                            decreaseButton.setAttribute('name', 'decrease_btn');
                            decreaseButton.textContent = "-";

                            // Create the input for quantity
                            const quantityInput = document.createElement('input');
                            quantityInput.setAttribute('type', 'number');
                            quantityInput.setAttribute('class', 'quantity');
                            quantityInput.setAttribute('name', 'update_quantity');
                            quantityInput.setAttribute('min', '1');
                            quantityInput.setAttribute('value', element.Quantità);
                            quantityInput.setAttribute('readonly', true);

                            // Create the "+" button
                            const increaseButton = document.createElement('button');
                            increaseButton.setAttribute('type', 'submit');
                            increaseButton.setAttribute('class', 'bottoni_tondi');
                            increaseButton.setAttribute('name', 'update_btn');
                            increaseButton.textContent = "+";

                            // Append elements to the form
                            quantityForm.append(updateQuantityNameInput);
                            quantityForm.append(decreaseButton);
                            quantityForm.append(quantityInput);
                            quantityForm.append(increaseButton);
                            quantityForm.addEventListener('submit', function (event) {
                                event.preventDefault();
                                const addButtonClicked = event.submitter.classList.contains('bottoni_tondi');
                                const lowButtonClicked = event.submitter.classList.contains('bottoni_tondi2');
                                if (addButtonClicked) {
                                    $.ajax({
                                        url: 'server.php', // Specifica l'URL del server
                                        type: 'POST', // Metodo HTTP (PUT)
                                        data: { elemento: element.Nome, valore: '+1' }, // Dati da inviare al server
                                        success: function (response) {
                                            const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                            inputElement.value++;
                                        },
                                        error: function (error) {
                                            // Gestisci eventuali errori
                                        }
                                    });
                                } else if (lowButtonClicked) {
                                    $.ajax({
                                        url: 'server.php', // Specifica l'URL del server
                                        type: 'POST', // Metodo HTTP (PUT)
                                        data: { elemento: element.Nome, valore: '-1' }, // Dati da inviare al server
                                        success: function (response) {
                                            const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                            if (inputElement.value == 1) {
                                                const myDiv = document.getElementById(element.Nome);
                                                myDiv.remove();
                                            } else {
                                                inputElement.value--;
                                            }
                                        },
                                        error: function (error) {
                                            console.error('Si è verificato un errore durante la richiesta.');
                                        }
                                    });
                                }
                            });
                            carrelloQuantità.append(quantityForm);
                            carrelloCard.append(carrelloQuantità);
                            $('.carrello_spesa').append(carrelloCard);
                        } else {
                            const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                            inputElement.value++;
                        }
                    });
                },
                error: function (xhr, status, error) {
                    console.error('Errore Richiesta');
                }
            });
        })
    </script>
    <script> // script per visualizzare tutti i prodotti
        $(document).ready(function () {
            // Effettua la richiesta al server per ottenere i prodotti
            $.ajax({
                url: "server.php",
                type: "GET",
                dataType: "json",
                success: function (data) {
                    // Ora puoi utilizzare forEach()
                    data.forEach(function (element) {
                        // Crea un div card per ogni prodotto
                        var productCard = $('<div>').addClass('card');
                        var CardImage = $('<div>').addClass('card_image');
                        CardImage.append('<img src="' + element.image + '" alt="' + element.Nome + '">');
                        productCard.append(CardImage);
                        productCard.append('<h3>' + element.Nome + '</h3>');

                        var productForm = document.createElement('form');
                        productForm.id = 'productForm';
                        productForm.method = 'post';

                        var inputName = document.createElement('input');
                        inputName.type = 'hidden';
                        inputName.name = 'product_name';
                        inputName.value = element.Nome;

                        var inputCategory = document.createElement('input');
                        inputCategory.type = 'hidden';
                        inputCategory.name = 'product_category';
                        inputCategory.value = element.category;

                        var inputImage = document.createElement('input');
                        inputImage.type = 'hidden';
                        inputImage.name = 'product_image';
                        inputImage.value = element.Nome;

                        // Aggiungi gli input al form
                        productForm.appendChild(inputName);
                        productForm.appendChild(inputCategory);
                        productForm.appendChild(inputImage);

                        var submitButton = document.createElement("input");
                        submitButton.type = "submit";
                        submitButton.className = "bottone_carrello";
                        submitButton.value = "Add to Cart";
                        submitButton.name = "add_to_cart"

                        productForm.appendChild(submitButton);
                        productForm.addEventListener("submit", function (event) {
                            event.preventDefault(); // Evita il comportamento predefinito del modulo (refresh della pagina)

                            // Serializza i dati del form
                            var formData = $(this).serialize();

                            // Esegui la richiesta AJAX
                            $.ajax({
                                type: "POST",
                                url: "server.php",
                                data: formData,
                                success: function (response) {
                                    if (!(!!document.getElementById(element.Nome))) {

                                        var carrelloCard = $('<div>').addClass('carrello_elemento');
                                        carrelloCard[0].id = element.Nome;
                                        var carrelloNome = $('<div>').addClass('carrello_nome');
                                        carrelloNome.append('<h3>' + element.Nome + '</h3>');
                                        carrelloCard.append(carrelloNome);

                                        var carrelloQuantità = $('<div>').addClass('carrello_quantità');
                                        const quantityForm = document.createElement('form');
                                        quantityForm.setAttribute('id', element.Nome);
                                        quantityForm.setAttribute('action', '');
                                        quantityForm.setAttribute('method', 'post');

                                        // Create the hidden input for update_quantity_name
                                        const updateQuantityNameInput = document.createElement('input');
                                        updateQuantityNameInput.setAttribute('type', 'hidden');
                                        updateQuantityNameInput.setAttribute('name', 'update_quantity_name');
                                        updateQuantityNameInput.value = element.Nome;

                                        // Create the "-" button
                                        const decreaseButton = document.createElement('button');
                                        decreaseButton.setAttribute('type', 'submit');
                                        decreaseButton.setAttribute('class', 'bottoni_tondi2');
                                        decreaseButton.setAttribute('name', 'decrease_btn');
                                        decreaseButton.textContent = "-";

                                        // Create the input for quantity
                                        const quantityInput = document.createElement('input');
                                        quantityInput.setAttribute('type', 'number');
                                        quantityInput.setAttribute('class', 'quantity');
                                        quantityInput.setAttribute('name', 'update_quantity');
                                        quantityInput.setAttribute('min', '1');
                                        quantityInput.setAttribute('value', 1);
                                        quantityInput.setAttribute('readonly', true);

                                        // Create the "+" button
                                        const increaseButton = document.createElement('button');
                                        increaseButton.setAttribute('type', 'submit');
                                        increaseButton.setAttribute('class', 'bottoni_tondi');
                                        increaseButton.setAttribute('name', 'update_btn');
                                        increaseButton.textContent = "+";

                                        // Append elements to the form
                                        quantityForm.append(updateQuantityNameInput);
                                        quantityForm.append(decreaseButton);
                                        quantityForm.append(quantityInput);
                                        quantityForm.append(increaseButton);
                                        quantityForm.addEventListener('submit', function (event) {
                                            event.preventDefault();
                                            const addButtonClicked = event.submitter.classList.contains('bottoni_tondi');
                                            const lowButtonClicked = event.submitter.classList.contains('bottoni_tondi2');
                                            if (addButtonClicked) {
                                                $.ajax({
                                                    url: 'server.php', // Specifica l'URL del server
                                                    type: 'POST', // Metodo HTTP (PUT)
                                                    data: { elemento: element.Nome, valore: '+1' }, // Dati da inviare al server
                                                    success: function (response) {
                                                        const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                                        inputElement.value++;
                                                    },
                                                    error: function (error) {
                                                        // Gestisci eventuali errori
                                                    }
                                                });
                                            } else if (lowButtonClicked) {
                                                $.ajax({
                                                    url: 'server.php', // Specifica l'URL del server
                                                    type: 'POST', // Metodo HTTP (PUT)
                                                    data: { elemento: element.Nome, valore: '-1' }, // Dati da inviare al server
                                                    success: function (response) {
                                                        const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                                        if (inputElement.value == 1) {
                                                            const myDiv = document.getElementById(element.Nome);
                                                            myDiv.remove();
                                                        } else {
                                                            inputElement.value--;
                                                        }
                                                    },
                                                    error: function (error) {
                                                        console.error('Si è verificato un errore durante la richiesta.');
                                                    }
                                                });
                                            }
                                        });

                                        carrelloQuantità.append(quantityForm);
                                        carrelloCard.append(carrelloQuantità);
                                        $('.carrello_spesa').append(carrelloCard);
                                    } else {
                                        const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                        inputElement.value++;
                                    }
                                },
                                error: function (xhr, status, error) {
                                    // Gestisci eventuali errori
                                    console.error('Si è verificato un errore durante la richiesta.');
                                }
                            });
                        });
                        productCard.append(productForm);
                        // Aggiungi il div card al container
                        $('.prodotti_div').append(productCard);
                    });
                }
            });
        }); // Chiudi la parentesi graffa della funzione $(document).ready
    </script>
    <script> //script per l'utilizzo dei filtri
        $(document).ready(function () {
            var filterCards = document.getElementsByClassName('filter-card');
            for (var i = 0; i < filterCards.length; i++) {
                filterCards[i].addEventListener('click', function (event) {
                    var categoria = this.id;
                    $.ajax({
                        url: "server.php",
                        method: "GET",
                        data: { Categoria: categoria },
                        dataType: "json",
                        success: function (response) {
                            const myDiv = document.querySelector('.prodotti_div'); // Seleziona l'elemento <div>
                            myDiv.innerHTML = '';
                            console.log("Richiesta Eseguita");
                            response.forEach(function (element) {
                                var productCard = $('<div>').addClass('card');
                                var CardImage = $('<div>').addClass('card_image');
                                CardImage.append('<img src="' + element.image + '" alt="' + element.Nome + '">');
                                productCard.append(CardImage);
                                productCard.append('<h3>' + element.Nome + '</h3>');

                                var productForm = document.createElement('form');
                                productForm.id = 'productForm';
                                productForm.method = 'post';

                                var inputName = document.createElement('input');
                                inputName.type = 'hidden';
                                inputName.name = 'product_name';
                                inputName.value = element.Nome;

                                var inputCategory = document.createElement('input');
                                inputCategory.type = 'hidden';
                                inputCategory.name = 'product_category';
                                inputCategory.value = element.category;

                                var inputImage = document.createElement('input');
                                inputImage.type = 'hidden';
                                inputImage.name = 'product_image';
                                inputImage.value = element.Nome;

                                // Aggiungi gli input al form
                                productForm.appendChild(inputName);
                                productForm.appendChild(inputCategory);
                                productForm.appendChild(inputImage);

                                var submitButton = document.createElement("input");
                                submitButton.type = "submit";
                                submitButton.className = "bottone_carrello";
                                submitButton.value = "Add to Cart";
                                submitButton.name = "add_to_cart"

                                productForm.appendChild(submitButton);
                                productForm.addEventListener("submit", function (event) {
                                    event.preventDefault(); // Evita il comportamento predefinito del modulo (refresh della pagina)

                                    // Serializza i dati del form
                                    var formData = $(this).serialize();

                                    // Esegui la richiesta AJAX
                                    $.ajax({
                                        type: "POST",
                                        url: "server.php",
                                        data: formData,
                                        success: function (response) {
                                            if (!(!!document.getElementById(element.Nome))) {

                                                var carrelloCard = $('<div>').addClass('carrello_elemento');
                                                carrelloCard[0].id = element.Nome;
                                                var carrelloNome = $('<div>').addClass('carrello_nome');
                                                carrelloNome.append('<h3>' + element.Nome + '</h3>');
                                                carrelloCard.append(carrelloNome);

                                                var carrelloQuantità = $('<div>').addClass('carrello_quantità');
                                                const quantityForm = document.createElement('form');
                                                quantityForm.setAttribute('id', element.Nome);
                                                quantityForm.setAttribute('action', '');
                                                quantityForm.setAttribute('method', 'post');

                                                // Create the hidden input for update_quantity_name
                                                const updateQuantityNameInput = document.createElement('input');
                                                updateQuantityNameInput.setAttribute('type', 'hidden');
                                                updateQuantityNameInput.setAttribute('name', 'update_quantity_name');
                                                updateQuantityNameInput.value = element.Nome;

                                                // Create the "-" button
                                                const decreaseButton = document.createElement('button');
                                                decreaseButton.setAttribute('type', 'submit');
                                                decreaseButton.setAttribute('class', 'bottoni_tondi2');
                                                decreaseButton.setAttribute('name', 'decrease_btn');
                                                decreaseButton.textContent = "-";

                                                // Create the input for quantity
                                                const quantityInput = document.createElement('input');
                                                quantityInput.setAttribute('type', 'number');
                                                quantityInput.setAttribute('class', 'quantity');
                                                quantityInput.setAttribute('name', 'update_quantity');
                                                quantityInput.setAttribute('min', '1');
                                                quantityInput.setAttribute('value', 1);
                                                quantityInput.setAttribute('readonly', true);

                                                // Create the "+" button
                                                const increaseButton = document.createElement('button');
                                                increaseButton.setAttribute('type', 'submit');
                                                increaseButton.setAttribute('class', 'bottoni_tondi');
                                                increaseButton.setAttribute('name', 'update_btn');
                                                increaseButton.textContent = "+";

                                                // Append elements to the form
                                                quantityForm.append(updateQuantityNameInput);
                                                quantityForm.append(decreaseButton);
                                                quantityForm.append(quantityInput);
                                                quantityForm.append(increaseButton);
                                                quantityForm.addEventListener('submit', function (event) {
                                                    event.preventDefault();
                                                    const addButtonClicked = event.submitter.classList.contains('bottoni_tondi');
                                                    const lowButtonClicked = event.submitter.classList.contains('bottoni_tondi2');
                                                    if (addButtonClicked) {
                                                        $.ajax({
                                                            url: 'server.php', // Specifica l'URL del server
                                                            type: 'POST', // Metodo HTTP (PUT)
                                                            data: { elemento: element.Nome, valore: '+1' }, // Dati da inviare al server
                                                            success: function (response) {
                                                                const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                                                inputElement.value++;
                                                            },
                                                            error: function (error) {
                                                                // Gestisci eventuali errori
                                                            }
                                                        });
                                                    } else if (lowButtonClicked) {
                                                        $.ajax({
                                                            url: 'server.php', // Specifica l'URL del server
                                                            type: 'POST', // Metodo HTTP (PUT)
                                                            data: { elemento: element.Nome, valore: '-1' }, // Dati da inviare al server
                                                            success: function (response) {
                                                                const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                                                if (inputElement.value == 1) {
                                                                    const myDiv = document.getElementById(element.Nome);
                                                                    myDiv.remove();
                                                                } else {
                                                                    inputElement.value--;
                                                                }
                                                            },
                                                            error: function (error) {
                                                                console.error('Si è verificato un errore durante la richiesta.');
                                                            }
                                                        });
                                                    }
                                                });

                                                carrelloQuantità.append(quantityForm);
                                                carrelloCard.append(carrelloQuantità);
                                                $('.carrello_spesa').append(carrelloCard);
                                            } else {
                                                const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                                inputElement.value++;
                                            }
                                        },
                                        error: function (xhr, status, error) {
                                            // Gestisci eventuali errori
                                            console.error('Si è verificato un errore durante la richiesta.');
                                        }
                                    });
                                });
                                productCard.append(productForm);
                                // Aggiungi il div card al container
                                $('.prodotti_div').append(productCard);
                            });
                        },
                        error: function (xhr, status, error) {
                            // Gestisci eventuali errori
                            console.error('Si è verificato un errore durante la richiesta.');
                        }
                    });
                });
            }
        });
    </script>
    <script> //script per svuotare il carrello premendo l'icona del cestino
        $(document).ready(function () {
            document.getElementById('Cestino').addEventListener('submit', function (event) {
                event.preventDefault();
                $.ajax({
                    url: "server.php",
                    method: "POST",
                    data: { cestino: '1' },
                    success: function (response) {
                        const myDiv = document.querySelector('.carrello_spesa'); // Seleziona l'elemento <div>
                        myDiv.innerHTML = '';
                    },
                    error: function (xhr, status, error) {
                        console.error('Si è verificato un errore durante la richiesta.');
                    }
                });
            });
        });
    </script>
    <script> //script per l'utilizzo della barra di ricerca
        $(document).ready(function () {
            const searchBtn = document.getElementById("searchBtn");
            const searchBar = document.getElementById("searchBar");

            searchBtn.addEventListener("click", () => {
                const searchQuery = searchBar.value;
                $.ajax({
                    url: "server.php",
                    method: "GET",
                    data: { Nome: searchQuery },
                    dataType: "json",
                    success: function (response) {
                        console.log("Hello, world!");
                        const myDiv = document.querySelector('.prodotti_div'); // Seleziona l'elemento <div>
                        myDiv.innerHTML = '';
                        response.forEach(function (element) {
                            var productCard = $('<div>').addClass('card');
                            var CardImage = $('<div>').addClass('card_image');
                            CardImage.append('<img src="' + element.image + '" alt="' + element.Nome + '">');
                            productCard.append(CardImage);
                            productCard.append('<h3>' + element.Nome + '</h3>');

                            var productForm = document.createElement('form');
                            productForm.id = 'productForm';
                            productForm.method = 'post';

                            var inputName = document.createElement('input');
                            inputName.type = 'hidden';
                            inputName.name = 'product_name';
                            inputName.value = element.Nome;

                            var inputCategory = document.createElement('input');
                            inputCategory.type = 'hidden';
                            inputCategory.name = 'product_category';
                            inputCategory.value = element.category;

                            var inputImage = document.createElement('input');
                            inputImage.type = 'hidden';
                            inputImage.name = 'product_image';
                            inputImage.value = element.Nome;

                            // Aggiungi gli input al form
                            productForm.appendChild(inputName);
                            productForm.appendChild(inputCategory);
                            productForm.appendChild(inputImage);

                            var submitButton = document.createElement("input");
                            submitButton.type = "submit";
                            submitButton.className = "bottone_carrello";
                            submitButton.value = "Add to Cart";
                            submitButton.name = "add_to_cart"

                            productForm.appendChild(submitButton);
                            productForm.addEventListener("submit", function (event) {
                                event.preventDefault(); // Evita il comportamento predefinito del modulo (refresh della pagina)

                                // Serializza i dati del form
                                var formData = $(this).serialize();

                                // Esegui la richiesta AJAX
                                $.ajax({
                                    type: "POST",
                                    url: "server.php",
                                    data: formData,
                                    success: function (response) {
                                        if (!(!!document.getElementById(element.Nome))) {

                                            var carrelloCard = $('<div>').addClass('carrello_elemento');
                                            carrelloCard[0].id = element.Nome;
                                            var carrelloNome = $('<div>').addClass('carrello_nome');
                                            carrelloNome.append('<h3>' + element.Nome + '</h3>');
                                            carrelloCard.append(carrelloNome);

                                            var carrelloQuantità = $('<div>').addClass('carrello_quantità');
                                            const quantityForm = document.createElement('form');
                                            quantityForm.setAttribute('id', element.Nome);
                                            quantityForm.setAttribute('action', '');
                                            quantityForm.setAttribute('method', 'post');

                                            // Create the hidden input for update_quantity_name
                                            const updateQuantityNameInput = document.createElement('input');
                                            updateQuantityNameInput.setAttribute('type', 'hidden');
                                            updateQuantityNameInput.setAttribute('name', 'update_quantity_name');
                                            updateQuantityNameInput.value = element.Nome;

                                            // Create the "-" button
                                            const decreaseButton = document.createElement('button');
                                            decreaseButton.setAttribute('type', 'submit');
                                            decreaseButton.setAttribute('class', 'bottoni_tondi2');
                                            decreaseButton.setAttribute('name', 'decrease_btn');
                                            decreaseButton.textContent = "-";

                                            // Create the input for quantity
                                            const quantityInput = document.createElement('input');
                                            quantityInput.setAttribute('type', 'number');
                                            quantityInput.setAttribute('class', 'quantity');
                                            quantityInput.setAttribute('name', 'update_quantity');
                                            quantityInput.setAttribute('min', '1');
                                            quantityInput.setAttribute('value', 1);
                                            quantityInput.setAttribute('readonly', true);

                                            // Create the "+" button
                                            const increaseButton = document.createElement('button');
                                            increaseButton.setAttribute('type', 'submit');
                                            increaseButton.setAttribute('class', 'bottoni_tondi');
                                            increaseButton.setAttribute('name', 'update_btn');
                                            increaseButton.textContent = "+";

                                            // Append elements to the form
                                            quantityForm.append(updateQuantityNameInput);
                                            quantityForm.append(decreaseButton);
                                            quantityForm.append(quantityInput);
                                            quantityForm.append(increaseButton);
                                            quantityForm.addEventListener('submit', function (event) {
                                                event.preventDefault();
                                                const addButtonClicked = event.submitter.classList.contains('bottoni_tondi');
                                                const lowButtonClicked = event.submitter.classList.contains('bottoni_tondi2');
                                                if (addButtonClicked) {
                                                    $.ajax({
                                                        url: 'server.php', // Specifica l'URL del server
                                                        type: 'POST', // Metodo HTTP (PUT)
                                                        data: { elemento: element.Nome, valore: '+1' }, // Dati da inviare al server
                                                        success: function (response) {
                                                            const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                                            inputElement.value++;
                                                        },
                                                        error: function (error) {
                                                            // Gestisci eventuali errori
                                                        }
                                                    });
                                                } else if (lowButtonClicked) {
                                                    $.ajax({
                                                        url: 'server.php', // Specifica l'URL del server
                                                        type: 'POST', // Metodo HTTP (PUT)
                                                        data: { elemento: element.Nome, valore: '-1' }, // Dati da inviare al server
                                                        success: function (response) {
                                                            const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                                            if (inputElement.value == 1) {
                                                                const myDiv = document.getElementById(element.Nome);
                                                                myDiv.remove();
                                                            } else {
                                                                inputElement.value--;
                                                            }
                                                        },
                                                        error: function (error) {
                                                            console.error('Si è verificato un errore durante la richiesta.');
                                                        }
                                                    });
                                                }
                                            });

                                            carrelloQuantità.append(quantityForm);
                                            carrelloCard.append(carrelloQuantità);
                                            $('.carrello_spesa').append(carrelloCard);
                                        } else {
                                            const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                            inputElement.value++;
                                        }
                                    },
                                    error: function (xhr, status, error) {
                                        // Gestisci eventuali errori
                                        console.error('Si è verificato un errore durante la richiesta.');
                                    }
                                });
                            });
                            productCard.append(productForm);
                            // Aggiungi il div card al container
                            $('.prodotti_div').append(productCard);
                        });
                    },
                    error: function (xhr, status, error) {
                        // Gestisci eventuali errori
                        console.log('Si è verificato un errore durante la richiesta.');
                    }
                });
            });

            searchBar.addEventListener("keydown", (e) => {
                if (e.key === "Enter" && searchBar.value !== "") {
                    const searchQuery = searchBar.value;
                    $.ajax({
                        url: "server.php",
                        method: "GET",
                        data: { Nome: searchQuery },
                        dataType: "json",
                        success: function (response) {
                            console.log("Hello, world!");
                            const myDiv = document.querySelector('.prodotti_div'); // Seleziona l'elemento <div>
                            myDiv.innerHTML = '';
                            response.forEach(function (element) {
                                var productCard = $('<div>').addClass('card');
                                var CardImage = $('<div>').addClass('card_image');
                                CardImage.append('<img src="' + element.image + '" alt="' + element.Nome + '">');
                                productCard.append(CardImage);
                                productCard.append('<h3>' + element.Nome + '</h3>');

                                var productForm = document.createElement('form');
                                productForm.id = 'productForm';
                                productForm.method = 'post';

                                var inputName = document.createElement('input');
                                inputName.type = 'hidden';
                                inputName.name = 'product_name';
                                inputName.value = element.Nome;

                                var inputCategory = document.createElement('input');
                                inputCategory.type = 'hidden';
                                inputCategory.name = 'product_category';
                                inputCategory.value = element.category;

                                var inputImage = document.createElement('input');
                                inputImage.type = 'hidden';
                                inputImage.name = 'product_image';
                                inputImage.value = element.Nome;

                                // Aggiungi gli input al form
                                productForm.appendChild(inputName);
                                productForm.appendChild(inputCategory);
                                productForm.appendChild(inputImage);

                                var submitButton = document.createElement("input");
                                submitButton.type = "submit";
                                submitButton.className = "bottone_carrello";
                                submitButton.value = "Add to Cart";
                                submitButton.name = "add_to_cart"

                                productForm.appendChild(submitButton);
                                productForm.addEventListener("submit", function (event) {
                                    event.preventDefault(); // Evita il comportamento predefinito del modulo (refresh della pagina)

                                    // Serializza i dati del form
                                    var formData = $(this).serialize();

                                    // Esegui la richiesta AJAX
                                    $.ajax({
                                        type: "POST",
                                        url: "server.php",
                                        data: formData,
                                        success: function (response) {
                                            if (!(!!document.getElementById(element.Nome))) {

                                                var carrelloCard = $('<div>').addClass('carrello_elemento');
                                                carrelloCard[0].id = element.Nome;
                                                var carrelloNome = $('<div>').addClass('carrello_nome');
                                                carrelloNome.append('<h3>' + element.Nome + '</h3>');
                                                carrelloCard.append(carrelloNome);

                                                var carrelloQuantità = $('<div>').addClass('carrello_quantità');
                                                const quantityForm = document.createElement('form');
                                                quantityForm.setAttribute('id', element.Nome);
                                                quantityForm.setAttribute('action', '');
                                                quantityForm.setAttribute('method', 'post');

                                                // Create the hidden input for update_quantity_name
                                                const updateQuantityNameInput = document.createElement('input');
                                                updateQuantityNameInput.setAttribute('type', 'hidden');
                                                updateQuantityNameInput.setAttribute('name', 'update_quantity_name');
                                                updateQuantityNameInput.value = element.Nome;

                                                // Create the "-" button
                                                const decreaseButton = document.createElement('button');
                                                decreaseButton.setAttribute('type', 'submit');
                                                decreaseButton.setAttribute('class', 'bottoni_tondi2');
                                                decreaseButton.setAttribute('name', 'decrease_btn');
                                                decreaseButton.textContent = "-";

                                                // Create the input for quantity
                                                const quantityInput = document.createElement('input');
                                                quantityInput.setAttribute('type', 'number');
                                                quantityInput.setAttribute('class', 'quantity');
                                                quantityInput.setAttribute('name', 'update_quantity');
                                                quantityInput.setAttribute('min', '1');
                                                quantityInput.setAttribute('value', 1);
                                                quantityInput.setAttribute('readonly', true);

                                                // Create the "+" button
                                                const increaseButton = document.createElement('button');
                                                increaseButton.setAttribute('type', 'submit');
                                                increaseButton.setAttribute('class', 'bottoni_tondi');
                                                increaseButton.setAttribute('name', 'update_btn');
                                                increaseButton.textContent = "+";

                                                // Append elements to the form
                                                quantityForm.append(updateQuantityNameInput);
                                                quantityForm.append(decreaseButton);
                                                quantityForm.append(quantityInput);
                                                quantityForm.append(increaseButton);
                                                quantityForm.addEventListener('submit', function (event) {
                                                    event.preventDefault();
                                                    const addButtonClicked = event.submitter.classList.contains('bottoni_tondi');
                                                    const lowButtonClicked = event.submitter.classList.contains('bottoni_tondi2');
                                                    if (addButtonClicked) {
                                                        $.ajax({
                                                            url: 'server.php', // Specifica l'URL del server
                                                            type: 'POST', // Metodo HTTP (PUT)
                                                            data: { elemento: element.Nome, valore: '+1' }, // Dati da inviare al server
                                                            success: function (response) {
                                                                const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                                                inputElement.value++;
                                                            },
                                                            error: function (error) {
                                                                // Gestisci eventuali errori
                                                            }
                                                        });
                                                    } else if (lowButtonClicked) {
                                                        $.ajax({
                                                            url: 'server.php', // Specifica l'URL del server
                                                            type: 'POST', // Metodo HTTP (PUT)
                                                            data: { elemento: element.Nome, valore: '-1' }, // Dati da inviare al server
                                                            success: function (response) {
                                                                const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                                                if (inputElement.value == 1) {
                                                                    const myDiv = document.getElementById(element.Nome);
                                                                    myDiv.remove();
                                                                } else {
                                                                    inputElement.value--;
                                                                }
                                                            },
                                                            error: function (error) {
                                                                console.error('Si è verificato un errore durante la richiesta.');
                                                            }
                                                        });
                                                    }
                                                });

                                                carrelloQuantità.append(quantityForm);
                                                carrelloCard.append(carrelloQuantità);
                                                $('.carrello_spesa').append(carrelloCard);
                                            } else {
                                                const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                                inputElement.value++;
                                            }
                                        },
                                        error: function (xhr, status, error) {
                                            // Gestisci eventuali errori
                                            console.error('Si è verificato un errore durante la richiesta.');
                                        }
                                    });
                                });
                                productCard.append(productForm);
                                // Aggiungi il div card al container
                                $('.prodotti_div').append(productCard);
                            });
                        },
                        error: function (xhr, status, error) {
                            // Gestisci eventuali errori
                            console.log('Si è verificato un errore durante la richiesta.');
                        }
                    });
                }
            });
        });
    </script>
    <script>//script per le ricette
        $(document).ready(function () {
            var bottoni = document.getElementsByClassName('bottone_carrello2');
            for (var i = 0; i < bottoni.length; i++) {
                bottoni[i].addEventListener('click', function (event) {
                    var ricetta = this.id;
                    console.log(ricetta)
                    $.ajax({
                        url: "server.php",
                        method: "GET",
                        data: { Ricetta: ricetta },
                        dataType: "json",
                        success: function (response) {
                            response.forEach(function (element) {
                                if (!(!!document.getElementById(element.Nome))) {
                                    var carrelloCard = $('<div>').addClass('carrello_elemento');
                                    carrelloCard[0].id = element.Nome;
                                    var carrelloNome = $('<div>').addClass('carrello_nome');
                                    carrelloNome.append('<h3>' + element.Nome + '</h3>');
                                    carrelloCard.append(carrelloNome);

                                    var carrelloQuantità = $('<div>').addClass('carrello_quantità');
                                    const quantityForm = document.createElement('form');
                                    quantityForm.setAttribute('id', element.Nome);
                                    quantityForm.setAttribute('action', '');
                                    quantityForm.setAttribute('method', 'post');

                                    // Create the hidden input for update_quantity_name
                                    const updateQuantityNameInput = document.createElement('input');
                                    updateQuantityNameInput.setAttribute('type', 'hidden');
                                    updateQuantityNameInput.setAttribute('name', 'update_quantity_name');
                                    updateQuantityNameInput.value = element.Nome;

                                    // Create the "-" button
                                    const decreaseButton = document.createElement('button');
                                    decreaseButton.setAttribute('type', 'submit');
                                    decreaseButton.setAttribute('class', 'bottoni_tondi2');
                                    decreaseButton.setAttribute('name', 'decrease_btn');
                                    decreaseButton.textContent = "-";

                                    // Create the input for quantity
                                    const quantityInput = document.createElement('input');
                                    quantityInput.setAttribute('type', 'number');
                                    quantityInput.setAttribute('class', 'quantity');
                                    quantityInput.setAttribute('name', 'update_quantity');
                                    quantityInput.setAttribute('min', '1');
                                    quantityInput.setAttribute('value', 1);
                                    quantityInput.setAttribute('readonly', true);

                                    // Create the "+" button
                                    const increaseButton = document.createElement('button');
                                    increaseButton.setAttribute('type', 'submit');
                                    increaseButton.setAttribute('class', 'bottoni_tondi');
                                    increaseButton.setAttribute('name', 'update_btn');
                                    increaseButton.textContent = "+";

                                    // Append elements to the form
                                    quantityForm.append(updateQuantityNameInput);
                                    quantityForm.append(decreaseButton);
                                    quantityForm.append(quantityInput);
                                    quantityForm.append(increaseButton);
                                    quantityForm.addEventListener('submit', function (event) {
                                        event.preventDefault();
                                        const addButtonClicked = event.submitter.classList.contains('bottoni_tondi');
                                        const lowButtonClicked = event.submitter.classList.contains('bottoni_tondi2');
                                        if (addButtonClicked) {
                                            $.ajax({
                                                url: 'server.php', // Specifica l'URL del server
                                                type: 'POST', // Metodo HTTP (PUT)
                                                data: { elemento: element.Nome, valore: '+1' }, // Dati da inviare al server
                                                success: function (response) {
                                                    const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                                    inputElement.value++;
                                                },
                                                error: function (error) {
                                                    // Gestisci eventuali errori
                                                }
                                            });
                                        } else if (lowButtonClicked) {
                                            $.ajax({
                                                url: 'server.php', // Specifica l'URL del server
                                                type: 'POST', // Metodo HTTP (PUT)
                                                data: { elemento: element.Nome, valore: '-1' }, // Dati da inviare al server
                                                success: function (response) {
                                                    const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                                    if (inputElement.value == 1) {
                                                        const myDiv = document.getElementById(element.Nome);
                                                        myDiv.remove();
                                                    } else {
                                                        inputElement.value--;
                                                    }
                                                },
                                                error: function (error) {
                                                    console.error('Si è verificato un errore durante la richiesta.');
                                                }
                                            });
                                        }
                                    });
                                    carrelloQuantità.append(quantityForm);
                                    carrelloCard.append(carrelloQuantità);
                                    $('.carrello_spesa').append(carrelloCard);
                                } else {
                                    const inputElement = document.querySelector(`[id="${element.Nome}"] .quantity`);
                                    inputElement.value++;
                                }
                            });
                        },
                        error: function (xhr, status, error) {
                            // Gestisci eventuali errori
                            console.error('Si è verificato un errore durante la richiesta.');
                        }
                    });
                });
            };
        });
    </script>

    <script> //script per la chiusura del checkout
        $(document).ready(function () {
            const checkout_wrapper = document.querySelector('.wrapper_checkout');
            const checkout_body = document.querySelector('body');
            const checkout_iconClose = document.querySelector('.icon_close_checkout');
            const checkout_btnPopup = document.querySelector('.bottone_checkout');


            //si attiva al click del bottone checkout
            checkout_btnPopup.addEventListener('click', function (event) {
                event.preventDefault();

                var sessionId = getSessionId();

                // Effettua la richiesta GET al server
                // INPUT: None (posizione la trova dal datbase delle sessioni, i prodotti nel carrello dal database cart)
                // OUTPUT: supermercato più economico, supermercato più vicino, supermercato consigliato, prezzi prodotti del supermercato consigliato
                $.ajax({
                    url: "server.php?action=checkout",
                    method: "GET",
                    data: { id: sessionId },
                    success: function (response) {
                        console.log(response);

                        const carrelloSpesa = document.querySelector('.carrello');

                        // Inserisci informazioni sui supermercati
                        const economico = document.querySelector('.economico');
                        economico.innerHTML = `
    <h3>Supermercato più economico:</h3>
    <p>Nome: ${response.cheapestSupermarket.name}</p>
    <p>Chain: ${response.cheapestSupermarket.chain}</p>
    <p>Distanza: ${response.cheapestSupermarket.distance}</p>
    <p>Latitudine: ${response.cheapestSupermarket.latitude}</p>
    <p>Longitudine: ${response.cheapestSupermarket.longitude}</p>
    <p>Prezzo totale: ${response.cheapestSupermarket.totalPrice} €</p>
`;

                        const vicino = document.querySelector('.vicino');
                        vicino.innerHTML = `
    <h3>Supermercato più vicino:</h3>
    <p>Nome: ${response.nearestSupermarket.name}</p>
    <p>Chain: ${response.nearestSupermarket.chain}</p>
    <p>Distanza: ${response.nearestSupermarket.distance}</p>
    <p>Latitudine: ${response.nearestSupermarket.latitude}</p>
    <p>Longitudine: ${response.nearestSupermarket.longitude}</p>
    <p>Prezzo totale: ${response.nearestSupermarket.totalPrice} €</p>
`;

                        const consigliato = document.querySelector('.consigliato');
                        consigliato.innerHTML = `
    <h3>Supermercato consigliato:</h3>
    <p>Nome: ${response.recommendedSupermarket.name}</p>
    <p>Chain: ${response.recommendedSupermarket.chain}</p>
    <p>Distanza: ${response.recommendedSupermarket.distance}</p>
    <p>Latitudine: ${response.recommendedSupermarket.latitude}</p>
    <p>Longitudine: ${response.recommendedSupermarket.longitude}</p>
    <p>Prezzo totale: ${response.recommendedSupermarket.totalPrice} €</p>
`;

                        // Inserisci lista dei prodotti nel carrello
                        carrelloSpesa.innerHTML = `
    <h3>Lista dei Prodotti:</h3>
    <ul>
        ${response.productsPrices.map(product => `
            <li>
                <p>Nome: ${product.Nome}</p>
                <p>Quantità: ${product.Quantità}</p>
                <p>Prezzo: ${product.price} €</p>
            </li>
        `).join('')}
    </ul>
    <h3>Prezzo totale: ${response.recommendedSupermarket.totalPrice} €</h3>
`;

                    // Aggiungi al div di classe .salva un bottone salva
                    // sul bottone mettiamo un addEventListener che al click del bottone fa un richiesta get al server

                    const salva = document.querySelector('.salva');
                    salva.innerHTML = `
    <button class="bottone_salva">Salva</button>
`;

                    const bottoneSalva = document.querySelector('.bottone_salva');
                    bottoneSalva.addEventListener('click', function (event) {
                        event.preventDefault();

                        // prenditi dal sessionStorage il sessionID e l'email
                        var sessionId = sessionStorage.getItem('sessionId');
                        var email = sessionStorage.getItem('email');
                        var log = sessionStorage.getItem('Log');

                        console.log('Session ID:', sessionId);
                        console.log('Email:', email);
                        console.log('Log:', log);

                        if(log == 1){
                            console.log('Loggato');

                            // Creo un array info con i dati da inviare al server
                            var info = response;

                        $.ajax({
                            url: "server.php?action=save",
                            method: "GET",
                            data: { id: sessionId, email: email, info: info },
                            success: function (response) {
                                console.log(response);

                                // Create a link to download the PDF
                                const downloadLink = document.createElement('a');
                                downloadLink.href = 'data:application/pdf;base64,' + response;
                                downloadLink.download = 'file.pdf';
                                downloadLink.click();
                            },
                            error: function (xhr, status, error) {
                                console.error('Si è verificato un errore durante la richiesta.');
                            }
                        });


                        } else {
                            console.log('Non loggato');
                            const wrapper=document.querySelector('.wrapper');
                            const body = document.querySelector('body');
                            wrapper.classList.add('active-popup');
                            body.classList.add('popup-active');
                            checkout_wrapper.classList.remove('active-popup');
                        }
                    });
                    





                    },
                    error: function (xhr, status, error) {
                        console.error('Si è verificato un errore durante la richiesta.');
                    }
                });

                checkout_wrapper.classList.add('active-popup');
                checkout_body.classList.add('popup-active');

            });

            // si attiva al click della x nel checkout
            checkout_iconClose.addEventListener('click', () => {
                checkout_wrapper.classList.remove('active-popup');
                checkout_body.classList.remove('popup-active');
            });
        });
    </script>

    <script>
        $(document).ready(function () {
            // Request geolocation
            if ("geolocation" in navigator) {
                navigator.geolocation.getCurrentPosition(function (position) {
                    const latitude = position.coords.latitude;
                    const longitude = position.coords.longitude;

                    // Save latitude and longitude to session storage
                    sessionStorage.setItem("latitude", latitude);
                    sessionStorage.setItem("longitude", longitude);

                    var sessionId = getSessionId();

                    // Check if session ID exists
                    if (sessionId) {
                        console.log('Session ID:', sessionId);
                    } else {
                        console.log('Session ID not found.');
                    }

                    // Send latitude and longitude to backend using AJAX
                    $.ajax({
                        type: "POST",
                        url: "server.php",
                        data: { latitude: latitude, longitude: longitude, session_id: sessionId },
                        success: function (response) {
                            console.log(response);
                        },
                        error: function (xhr, status, error) {
                            console.error(error);
                        }
                    });
                });
            } else {
                console.log("Geolocation is not available");
            }
        });

        function getSessionId() {
            // Retrieve the session ID from sessionStorage
            return sessionStorage.getItem('sessionId');
        }

        // Call function to get session ID

    </script>


    <title>MyShoppingList</title>
</head>

<body>

    <div class="overlay"></div>

    <!-- NavBar-->
    <div>
        <header class="header">
            <a href="../home/home.html"><img src="Icone/MyShoppingList.png" class="logo"></a>
            <nav class="my_navbar">
                <a href="../home/home.html" class="link_navbar">Home</a>
                <a href="#contatti">Contacts</a>
                <a href="#contatti" class="icon_contatti"><img src="./Icone/phone.png"></a>
                <a href="#">
                    <button class="Btn">
                        <div class="sign"><ion-icon name="person-circle-outline" size="large"></ion-icon></div>
                        <div class="text_btn">Login</div>
                    </button>
                </a>
            </nav>
        </header>
    </div>

    <div class="top_div">

        <div class="search">
            <input placeholder="Cerca..." type="text" id="searchBar">
            <button type="submit" id="searchBtn"><ion-icon id="search-icon" name="search"
                    size="medium"></ion-icon></button>
        </div>

        <div class="filter-wrapper">
            <button class="filter-card tooltip-top" id="All">
                <img src="Icone/icons8-coltello-e-spatchula-50.png">
            </button>
            <button class="filter-card tooltip-top2" id="Dispensa">
                <img src="Icone/icons8-pasta-64.png">
            </button>
            <button class="filter-card tooltip-top3" id="Carne">
                <img src="Icone/icons8-carre-di-agnello-60.png">
            </button>
            <div class="filter-card tooltip-top4" id="Salumi e Formaggi">
                <img src="Icone/icons8-cheese-64-2.png">
            </div>
            <div class="filter-card tooltip-top5" id="Pesce">
                <img src="Icone/icons8-salmone-64.png">
            </div>
            <div class="filter-card tooltip-top6" id="Bevande">
                <img src="Icone/icons8-softdrink-64.png">
            </div>
            <div class="filter-card tooltip-top7" id="Igiene e Casa">
                <img src="Icone/icons8-sapone-60.png">
            </div>
            <div class="filter-card tooltip-top8" id="Vegetali">
                <img src="Icone/icons8-carrot-64.png">
            </div>
            <div class="filter-card tooltip-top9" id="Snack">
                <img src="Icone/icons8-snack-64 (2).png">
            </div>
            <div class="filter-card tooltip-top10" id="Dolci">
                <img src="Icone/icons8-barra-di-cioccolato-64 (1).png">
            </div>
            <div class="filter-card tooltip-top11" id="Surgelati">
                <img src="Icone/icons8-inverno-64.png">
            </div>
            <div class="filter-card tooltip-top12" id="Healty">
                <img src="Icone/icons8-healthy-food-64.png">
            </div>
        </div>
    </div>

    <!--Login e Signin-->
    <div id="login_div">
        <div class="wrapper">
            <span class="icon-close">
                <ion-icon name="close-outline"></ion-icon>
            </span>

            <div class="form-box login">
                <h2>Login</h2>
                <form action="#">
                    <div class="input-box">
                        <span class="icon"><ion-icon name="mail-outline"></ion-icon></span>
                        <input type="email" required>
                        <label>Email</label>
                    </div>
                    <div class="input-box">
                        <span class="icon"><ion-icon name="lock-closed-outline"></ion-icon></span>
                        <input type="password" required>
                        <label>Password</label>
                    </div>
                    <button type="submit" class="btn">Login</button>
                    <div class="login-register">
                        <p>Don't have an account?<a href="../User_Page/user.html" class="register-link"> Register</a>
                        </p>
                    </div>
                </form>
            </div>

            <div class="form-box register">
                <h2>Registration</h2>
                <form action="#">
                    <div class="input-box">
                        <span class="icon"><ion-icon name="person-outline"></ion-icon></span>
                        <input type="text" required>
                        <label>Username</label>
                    </div>
                    <div class="input-box">
                        <span class="icon"><ion-icon name="mail-outline"></ion-icon></span>
                        <input type="email" required>
                        <label>Email</label>
                    </div>
                    <div class="input-box">
                        <span class="icon"><ion-icon name="lock-closed-outline"></ion-icon></span>
                        <input type="password" required>
                        <label>Password</label>
                    </div>
                    <div class="remember-forgot">
                        <label><input type="checkbox">agree to the terms & conditions</label>
                    </div>
                    <button type="submit" class="btn">Register</button>
                    <div class="login-register">
                        <p>Already have an account?<a href="#" class="login-link">Login</a></p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <div class="prodotti_div">
    </div>


    <div class="carrello_div">
        <div class="carrello_titolo">
            <h2>Shopping Cart</h2>
        </div>

        <div class="carrello_spesa">

        </div>

        <div class="carrello_checkout">
            <form id="Cestino">
                <input type="submit" name="cestino" class="bottoni_tondi3" value="">
            </form>
            <button class="bottone_checkout">
                <h2>Checkout</h2>
            </button>
        </div>

    </div>

    <div class="wrapper_checkout">
        <span class="icon_close_checkout">
            <ion-icon name="close-outline"></ion-icon>
        </span>
        <div class="flex-container">

            <div class="left_checkout">

                <div class="carrello">
                    <p class="checkout_font">Cart</p>
                </div>

                <div class="salva">
                    <p class="checkout_font">Save</p>
                </div>

            </div>

            <div class="right_checkout">

                <div class="economico">
                    <p class="checkout_font">Cheapest</p>
                </div>
                <div class="vicino">
                    <p class="checkout_font">Nearest</p>
                </div>
                <div class="consigliato">
                    <p class="checkout_font">Recommended</p>
                </div>

            </div>

        </div>
    </div>


    <div class="text">
        <h1>WHAT WE RECOMMEND YOU...</h1>
    </div>

    <div class="ricette_div">

        <div class="ricetta_card">
            <div class="ricetta_immagine">
                <img src="Icone/carbo (1) (1).jpeg" alt="">
            </div>
            <div class="ricetta_description">
                <h4>CARBONARA</h4>
                Carbonara is a traditional Italian dish, originating from Rome. This creamy and tasty pasta is prepared
                with spaghetti or rigatoni, eggs, pecorino cheese, guanciale and black pepper.
            </div>
            <div class="ricetta_form">
                <button type="submit" class="bottone_carrello2" id="Carbonara">
                    Try it
                </button>
            </div>
        </div>

        <div class="ricetta_card">
            <div class="ricetta_immagine">
                <img src="Icone/L'amatriciana di Cicolini (1).jpg" alt="">
            </div>
            <div class="ricetta_description">
                <h4>AMATRICIANA</h4>
                Amatriciana is a traditional Italian dish, originally from Amatrice. It is simple but rich in flavor
                thanks to the bacon, pecorino romano, tomato and chilli pepper. It pairs well with bucatini.
            </div>
            <div class="ricetta_form">
                <button type="submit" class="bottone_carrello2" id="Amatriciana">
                    Try it
                </button>
            </div>
        </div>

        <div class="ricetta_card">
            <div class="ricetta_immagine">
                <img src="Icone/Pollo (1) (1).jpg" alt="">
            </div>
            <div class="ricetta_description">
                <h4>POLLO E PATATE</h4>
                A warm embrace between pieces of succulent chicken and soft potatoes. The aroma of garlic and rosemary
                wafts through the air as the pan sizzles. It is a dish that tastes of home.
            </div>
            <div class="ricetta_form">
                <button type="submit" class="bottone_carrello2" id="Pollo">
                    Try it
                </button>
            </div>
        </div>

        <div class="ricetta_card">
            <div class="ricetta_immagine">
                <img src="Icone/Tiramisu-Recipe-Cover (1) (2).jpg" alt="">
            </div>
            <div class="ricetta_description">
                <h4>TIRAMISU</h4>
                Tiramisu is a traditional and famous Italian dessert. This spoon dessert is made up of ladyfingers
                soaked in coffee and covered with a cream made from mascarpone, eggs and sugar.
            </div>
            <div class="ricetta_form">
                <button type="submit" class="bottone_carrello2" id="Tiramisù">
                    Try it
                </button>
            </div>
        </div>

        <div class="ricetta_card">
            <div class="ricetta_immagine">
                <img src="Icone/Lasagna (1) (1).jpg" alt="">
            </div>
            <div class="ricetta_description">
                <h4>LASAGNA</h4>
                Lasagna Bolognese is a mainstay of Italian cuisine that combines layers of fresh pasta with a rich meat
                sauce. It is a dish full of flavors and to be shared with family and friends.
            </div>
            <div class="ricetta_form">
                <button type="submit" class="bottone_carrello2" id="Lasagna">
                    Try it
                </button>
            </div>
        </div>

        <div class="ricetta_card">
            <div class="ricetta_immagine">
                <img src="Icone/PB051362-1-768x1024 (1) (1).jpg" alt="">
            </div>
            <div class="ricetta_description">
                <h4>TORTELLINI IN BRODO</h4>
                Tortellini are small stuffed pasta parcels. They are stuffed with a mixture of meats, Parmigiano
                Reggiano, eggs and nutmeg and then cooked in a rich meat broth and served piping hot.
            </div>
            <div class="ricetta_form">
                <button type="submit" class="bottone_carrello2" id="Tortellini">
                    Try it
                </button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer_container">
        <div class="social_container">
            <div class="wrapper_social">
                <a href="https://www.facebook.com/" class="icon facebook">
                    <span><i class="fab fa-facebook-f"></i></span>
                </a>

                <a href="https://www.instagram.com/" class="icon instagram">
                    <span><i class="fab fa-instagram"></i></span>
                </a>

                <a href="https://github.com/damspada/MyShoppingList" class="icon github">
                    <span><i class="fab fa-github"></i></span>
                </a>

                <a href="https://it.linkedin.com/" class="icon linkedin">
                    <span><i class="fab fa-linkedin"></i></span>
                </a>

                <a href="https://www.youtube.com/" class="icon youtube">
                    <span><i class="fab fa-youtube"></i></span>
                </a>
            </div>
        </div>

        <div class="contatti" id="contatti">
            <div class="contatto">
                <p><img src="./Icone/phone.png">+39 340-559-5344</p>
            </div>

            <div class="contatto">
                <p><img src="./Icone/mail.png"><a href="mailto:MyShoppingList@gmail.com">MyShoppingList@gmail.com</a>
                </p>
            </div>
        </div>
    </div>

</body>
<script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<script src="login_script.js"></script>

</html>